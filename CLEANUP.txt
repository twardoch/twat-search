2025-02-27 14:37:40 - 
=== PROJECT STATEMENT ===
2025-02-27 14:37:40 - ---
description: About this project
globs: 
alwaysApply: false
---
# About this project

`twat-search` is a multi-provider search 

## Development Notes
- Uses `uv` for Python package management
- Quality tools: ruff, mypy, pytest
- Clear provider protocol for adding new search backends
- Strong typing and runtime checks throughout

2025-02-27 14:37:40 - 
=== Current Status ===
2025-02-27 14:37:40 - Error: LOG.md is missing
2025-02-27 14:37:40 - [1.0K]  .
├── [  64]  .benchmarks
├── [  96]  .cursor
│   └── [ 192]  rules
│       ├── [ 334]  0project.mdc
│       ├── [ 559]  cleanup.mdc
│       └── [8.6K]  filetree.mdc
├── [  96]  .github
│   └── [ 128]  workflows
│       ├── [2.7K]  push.yml
│       └── [1.4K]  release.yml
├── [3.5K]  .gitignore
├── [1.1K]  .pre-commit-config.yaml
├── [ 128]  .specstory
│   ├── [1.3K]  history
│   │   ├── [2.0K]  .what-is-this.md
│   │   ├── [ 52K]  2025-02-25_01-58-creating-and-tracking-project-tasks.md
│   │   ├── [7.4K]  2025-02-25_02-17-project-task-continuation-and-progress-update.md
│   │   ├── [ 11K]  2025-02-25_02-24-planning-tests-for-twat-search-web-package.md
│   │   ├── [196K]  2025-02-25_02-27-implementing-tests-for-twat-search-package.md
│   │   ├── [ 46K]  2025-02-25_02-58-transforming-python-script-into-cli-tool.md
│   │   ├── [ 93K]  2025-02-25_03-09-generating-a-name-for-the-chat.md
│   │   ├── [5.5K]  2025-02-25_03-33-untitled.md
│   │   ├── [ 57K]  2025-02-25_03-54-integrating-search-engines-into-twat-search.md
│   │   ├── [ 72K]  2025-02-25_04-05-consolidating-you-py-and-youcom-py.md
│   │   ├── [6.1K]  2025-02-25_04-13-missing-env-api-key-names-in-pplx-py.md
│   │   ├── [118K]  2025-02-25_04-16-implementing-functions-for-brave-search-engines.md
│   │   ├── [286K]  2025-02-25_04-48-unifying-search-engine-parameters-in-twat-search.md
│   │   ├── [ 83K]  2025-02-25_05-36-implementing-duckduckgo-search-engine.md
│   │   ├── [194K]  2025-02-25_05-43-implementing-the-webscout-search-engine.md
│   │   ├── [ 23K]  2025-02-25_06-07-implementing-bing-scraper-engine.md
│   │   ├── [ 15K]  2025-02-25_06-12-continuing-bing-scraper-engine-implementation.md
│   │   ├── [121K]  2025-02-25_06-34-implementing-safe-import-patterns-in-modules.md
│   │   ├── [9.9K]  2025-02-25_07-09-refactoring-plan-and-progress-update.md
│   │   ├── [ 40K]  2025-02-25_07-17-implementing-phase-1-from-todo-md.md
│   │   ├── [292K]  2025-02-25_07-34-integrating-hasdata-google-serp-apis.md
│   │   ├── [142K]  2025-02-25_08-19-implementing-search-engines-from-nextengines-md.md
│   │   ├── [175K]  2025-02-26_09-54-implementing-plain-option-for-search-commands.md
│   │   ├── [264K]  2025-02-26_10-55-standardizing-engine-naming-conventions.md
│   │   ├── [4.3K]  2025-02-26_11-30-untitled.md
│   │   ├── [102K]  2025-02-26_12-11-update-config-py-to-use-engine-constants.md
│   │   ├── [278K]  2025-02-26_12-18-update-engine-imports-and-exports-in-init-py.md
│   │   ├── [268K]  2025-02-26_13-40-search-engine-initialization-errors.md
│   │   ├── [ 61K]  2025-02-26_14-15-codebase-issue-analysis-and-fix-plan.md
│   │   ├── [ 43K]  2025-02-26_14-52-resolving-critical-issues-in-todo-md.md
│   │   ├── [247K]  2025-02-26_17-48-progress-update-for-twat-search-project.md
│   │   ├── [ 28K]  2025-02-26_18-28-fixing-num-results-parameter-in-twat-search.md
│   │   ├── [ 63K]  2025-02-26_18-44-fixing-search-engine-issues-in-codebase.md
│   │   ├── [ 72K]  2025-02-26_19-37-removing-anywebsearch-references-from-codebase.md
│   │   ├── [ 98K]  2025-02-26_19-49-fixing-linting-errors-in-code.md
│   │   ├── [761K]  2025-02-26_20-02-analyzing-todo-md-and-updating-progress-md.md
│   │   ├── [ 69K]  2025-02-26_22-55-bing-scraper-result-inconsistency-investigation.md
│   │   ├── [591K]  2025-02-26_23-13-google-scraper-result-validation-issues.md
│   │   ├── [ 23K]  2025-02-27_12-02-plan-for-adding-support-for-falla-engines.md
│   │   └── [352K]  2025-02-27_13-08-implementing-falla-and-tracking-progress.md
│   └── [2.2M]  history.txt
├── [3.2K]  CHANGELOG.md
├── [ 499]  CLEANUP.txt
├── [1.0K]  LICENSE
├── [ 30K]  NEXTENGINES.md
├── [8.3K]  PROGRESS.md
├── [ 21K]  README.md
├── [6.1K]  TODO.md
├── [   7]  VERSION.txt
├── [ 12K]  cleanup.py
├── [ 192]  dist
├── [5.5K]  pyproject.toml
├── [ 224]  resources
│   ├── [ 224]  brave
│   │   ├── [ 65K]  brave.md
│   │   ├── [ 29K]  brave_image.md
│   │   ├── [ 22K]  brave_news.md
│   │   └── [ 22K]  brave_video.md
│   ├── [ 128]  pplx
│   │   ├── [ 32K]  pplx.md
│   │   └── [ 335]  pplx_urls.txt
│   ├── [ 15K]  pricing.md
│   └── [ 192]  you
│       ├── [ 54K]  you.md
│       ├── [ 251]  you.txt
│       ├── [ 58K]  you_news.md
│       └── [  98]  you_news.txt
├── [ 128]  src
│   └── [ 256]  twat_search
│       ├── [ 613]  __init__.py
│       ├── [2.5K]  __main__.py
│       └── [ 416]  web
│           ├── [1.8K]  __init__.py
│           ├── [9.0K]  api.py
│           ├── [ 48K]  cli.py
│           ├── [ 17K]  config.py
│           ├── [3.1K]  engine_constants.py
│           ├── [ 576]  engines
│           │   ├── [7.6K]  __init__.py
│           │   ├── [ 16K]  base.py
│           │   ├── [ 11K]  bing_scraper.py
│           │   ├── [ 15K]  brave.py
│           │   ├── [9.2K]  critique.py
│           │   ├── [7.8K]  duckduckgo.py
│           │   ├── [6.4K]  falla.py
│           │   ├── [ 12K]  google_scraper.py
│           │   ├── [7.9K]  hasdata.py
│           │   ├── [ 224]  lib_falla
│           │   │   ├── [ 822]  __init__.py
│           │   │   ├── [ 544]  core
│           │   │   │   ├── [1.4K]  __init__.py
│           │   │   │   ├── [ 763]  aol.py
│           │   │   │   ├── [ 892]  ask.py
│           │   │   │   ├── [ 900]  bing.py
│           │   │   │   ├── [ 855]  dogpile.py
│           │   │   │   ├── [1.0K]  duckduckgo.py
│           │   │   │   ├── [7.5K]  falla.py
│           │   │   │   ├── [ 860]  gibiru.py
│           │   │   │   ├── [3.2K]  google.py
│           │   │   │   ├── [ 762]  mojeek.py
│           │   │   │   ├── [1.1K]  qwant.py
│           │   │   │   ├── [ 923]  searchencrypt.py
│           │   │   │   ├── [ 870]  startpage.py
│           │   │   │   ├── [ 955]  yahoo.py
│           │   │   │   └── [1.0K]  yandex.py
│           │   │   ├── [1.5K]  main.py
│           │   │   ├── [ 378]  settings.py
│           │   │   └── [3.0K]  utils.py
│           │   ├── [7.8K]  pplx.py
│           │   ├── [7.3K]  serpapi.py
│           │   ├── [8.2K]  tavily.py
│           │   └── [8.7K]  you.py
│           ├── [1.0K]  exceptions.py
│           ├── [1.6K]  models.py
│           └── [4.1K]  utils.py
├── [ 256]  tests
│   ├── [  64]  .benchmarks
│   ├── [2.0K]  conftest.py
│   ├── [ 193]  test_twat_search.py
│   ├── [ 192]  unit
│   │   ├── [  78]  __init__.py
│   │   ├── [1.6K]  mock_engine.py
│   │   └── [ 320]  web
│   │       ├── [  82]  __init__.py
│   │       ├── [ 160]  engines
│   │       │   ├── [  73]  __init__.py
│   │       │   └── [4.4K]  test_base.py
│   │       ├── [5.2K]  test_api.py
│   │       ├── [2.7K]  test_config.py
│   │       ├── [2.0K]  test_exceptions.py
│   │       ├── [4.1K]  test_models.py
│   │       └── [3.5K]  test_utils.py
│   └── [ 160]  web
│       └── [ 10K]  test_bing_scraper.py
├── [477K]  twat_search.txt
└── [267K]  uv.lock

25 directories, 126 files

2025-02-27 14:37:40 - 
Project structure:
2025-02-27 14:37:40 - [1.0K]  .
├── [  64]  .benchmarks
├── [  96]  .cursor
│   └── [ 192]  rules
│       ├── [ 334]  0project.mdc
│       ├── [ 559]  cleanup.mdc
│       └── [8.6K]  filetree.mdc
├── [  96]  .github
│   └── [ 128]  workflows
│       ├── [2.7K]  push.yml
│       └── [1.4K]  release.yml
├── [3.5K]  .gitignore
├── [1.1K]  .pre-commit-config.yaml
├── [ 128]  .specstory
│   ├── [1.3K]  history
│   │   ├── [2.0K]  .what-is-this.md
│   │   ├── [ 52K]  2025-02-25_01-58-creating-and-tracking-project-tasks.md
│   │   ├── [7.4K]  2025-02-25_02-17-project-task-continuation-and-progress-update.md
│   │   ├── [ 11K]  2025-02-25_02-24-planning-tests-for-twat-search-web-package.md
│   │   ├── [196K]  2025-02-25_02-27-implementing-tests-for-twat-search-package.md
│   │   ├── [ 46K]  2025-02-25_02-58-transforming-python-script-into-cli-tool.md
│   │   ├── [ 93K]  2025-02-25_03-09-generating-a-name-for-the-chat.md
│   │   ├── [5.5K]  2025-02-25_03-33-untitled.md
│   │   ├── [ 57K]  2025-02-25_03-54-integrating-search-engines-into-twat-search.md
│   │   ├── [ 72K]  2025-02-25_04-05-consolidating-you-py-and-youcom-py.md
│   │   ├── [6.1K]  2025-02-25_04-13-missing-env-api-key-names-in-pplx-py.md
│   │   ├── [118K]  2025-02-25_04-16-implementing-functions-for-brave-search-engines.md
│   │   ├── [286K]  2025-02-25_04-48-unifying-search-engine-parameters-in-twat-search.md
│   │   ├── [ 83K]  2025-02-25_05-36-implementing-duckduckgo-search-engine.md
│   │   ├── [194K]  2025-02-25_05-43-implementing-the-webscout-search-engine.md
│   │   ├── [ 23K]  2025-02-25_06-07-implementing-bing-scraper-engine.md
│   │   ├── [ 15K]  2025-02-25_06-12-continuing-bing-scraper-engine-implementation.md
│   │   ├── [121K]  2025-02-25_06-34-implementing-safe-import-patterns-in-modules.md
│   │   ├── [9.9K]  2025-02-25_07-09-refactoring-plan-and-progress-update.md
│   │   ├── [ 40K]  2025-02-25_07-17-implementing-phase-1-from-todo-md.md
│   │   ├── [292K]  2025-02-25_07-34-integrating-hasdata-google-serp-apis.md
│   │   ├── [142K]  2025-02-25_08-19-implementing-search-engines-from-nextengines-md.md
│   │   ├── [175K]  2025-02-26_09-54-implementing-plain-option-for-search-commands.md
│   │   ├── [264K]  2025-02-26_10-55-standardizing-engine-naming-conventions.md
│   │   ├── [4.3K]  2025-02-26_11-30-untitled.md
│   │   ├── [102K]  2025-02-26_12-11-update-config-py-to-use-engine-constants.md
│   │   ├── [278K]  2025-02-26_12-18-update-engine-imports-and-exports-in-init-py.md
│   │   ├── [268K]  2025-02-26_13-40-search-engine-initialization-errors.md
│   │   ├── [ 61K]  2025-02-26_14-15-codebase-issue-analysis-and-fix-plan.md
│   │   ├── [ 43K]  2025-02-26_14-52-resolving-critical-issues-in-todo-md.md
│   │   ├── [247K]  2025-02-26_17-48-progress-update-for-twat-search-project.md
│   │   ├── [ 28K]  2025-02-26_18-28-fixing-num-results-parameter-in-twat-search.md
│   │   ├── [ 63K]  2025-02-26_18-44-fixing-search-engine-issues-in-codebase.md
│   │   ├── [ 72K]  2025-02-26_19-37-removing-anywebsearch-references-from-codebase.md
│   │   ├── [ 98K]  2025-02-26_19-49-fixing-linting-errors-in-code.md
│   │   ├── [761K]  2025-02-26_20-02-analyzing-todo-md-and-updating-progress-md.md
│   │   ├── [ 69K]  2025-02-26_22-55-bing-scraper-result-inconsistency-investigation.md
│   │   ├── [591K]  2025-02-26_23-13-google-scraper-result-validation-issues.md
│   │   ├── [ 23K]  2025-02-27_12-02-plan-for-adding-support-for-falla-engines.md
│   │   └── [352K]  2025-02-27_13-08-implementing-falla-and-tracking-progress.md
│   └── [2.2M]  history.txt
├── [3.2K]  CHANGELOG.md
├── [ 499]  CLEANUP.txt
├── [1.0K]  LICENSE
├── [ 30K]  NEXTENGINES.md
├── [8.3K]  PROGRESS.md
├── [ 21K]  README.md
├── [6.1K]  TODO.md
├── [   7]  VERSION.txt
├── [ 12K]  cleanup.py
├── [ 192]  dist
├── [5.5K]  pyproject.toml
├── [ 224]  resources
│   ├── [ 224]  brave
│   │   ├── [ 65K]  brave.md
│   │   ├── [ 29K]  brave_image.md
│   │   ├── [ 22K]  brave_news.md
│   │   └── [ 22K]  brave_video.md
│   ├── [ 128]  pplx
│   │   ├── [ 32K]  pplx.md
│   │   └── [ 335]  pplx_urls.txt
│   ├── [ 15K]  pricing.md
│   └── [ 192]  you
│       ├── [ 54K]  you.md
│       ├── [ 251]  you.txt
│       ├── [ 58K]  you_news.md
│       └── [  98]  you_news.txt
├── [ 128]  src
│   └── [ 256]  twat_search
│       ├── [ 613]  __init__.py
│       ├── [2.5K]  __main__.py
│       └── [ 416]  web
│           ├── [1.8K]  __init__.py
│           ├── [9.0K]  api.py
│           ├── [ 48K]  cli.py
│           ├── [ 17K]  config.py
│           ├── [3.1K]  engine_constants.py
│           ├── [ 576]  engines
│           │   ├── [7.6K]  __init__.py
│           │   ├── [ 16K]  base.py
│           │   ├── [ 11K]  bing_scraper.py
│           │   ├── [ 15K]  brave.py
│           │   ├── [9.2K]  critique.py
│           │   ├── [7.8K]  duckduckgo.py
│           │   ├── [6.4K]  falla.py
│           │   ├── [ 12K]  google_scraper.py
│           │   ├── [7.9K]  hasdata.py
│           │   ├── [ 224]  lib_falla
│           │   │   ├── [ 822]  __init__.py
│           │   │   ├── [ 544]  core
│           │   │   │   ├── [1.4K]  __init__.py
│           │   │   │   ├── [ 763]  aol.py
│           │   │   │   ├── [ 892]  ask.py
│           │   │   │   ├── [ 900]  bing.py
│           │   │   │   ├── [ 855]  dogpile.py
│           │   │   │   ├── [1.0K]  duckduckgo.py
│           │   │   │   ├── [7.5K]  falla.py
│           │   │   │   ├── [ 860]  gibiru.py
│           │   │   │   ├── [3.2K]  google.py
│           │   │   │   ├── [ 762]  mojeek.py
│           │   │   │   ├── [1.1K]  qwant.py
│           │   │   │   ├── [ 923]  searchencrypt.py
│           │   │   │   ├── [ 870]  startpage.py
│           │   │   │   ├── [ 955]  yahoo.py
│           │   │   │   └── [1.0K]  yandex.py
│           │   │   ├── [1.5K]  main.py
│           │   │   ├── [ 378]  settings.py
│           │   │   └── [3.0K]  utils.py
│           │   ├── [7.8K]  pplx.py
│           │   ├── [7.3K]  serpapi.py
│           │   ├── [8.2K]  tavily.py
│           │   └── [8.7K]  you.py
│           ├── [1.0K]  exceptions.py
│           ├── [1.6K]  models.py
│           └── [4.1K]  utils.py
├── [ 256]  tests
│   ├── [  64]  .benchmarks
│   ├── [2.0K]  conftest.py
│   ├── [ 193]  test_twat_search.py
│   ├── [ 192]  unit
│   │   ├── [  78]  __init__.py
│   │   ├── [1.6K]  mock_engine.py
│   │   └── [ 320]  web
│   │       ├── [  82]  __init__.py
│   │       ├── [ 160]  engines
│   │       │   ├── [  73]  __init__.py
│   │       │   └── [4.4K]  test_base.py
│   │       ├── [5.2K]  test_api.py
│   │       ├── [2.7K]  test_config.py
│   │       ├── [2.0K]  test_exceptions.py
│   │       ├── [4.1K]  test_models.py
│   │       └── [3.5K]  test_utils.py
│   └── [ 160]  web
│       └── [ 10K]  test_bing_scraper.py
├── [477K]  twat_search.txt
└── [267K]  uv.lock

25 directories, 126 files

2025-02-27 14:37:40 - On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   .cursor/rules/filetree.mdc
	modified:   CLEANUP.txt
	modified:   PROGRESS.md
	modified:   TODO.md
	modified:   cleanup.py
	modified:   pyproject.toml
	modified:   src/twat_search/web/__init__.py
	modified:   src/twat_search/web/api.py
	modified:   src/twat_search/web/cli.py
	modified:   src/twat_search/web/config.py
	modified:   src/twat_search/web/engine_constants.py
	modified:   src/twat_search/web/engines/__init__.py
	modified:   src/twat_search/web/engines/base.py
	modified:   src/twat_search/web/engines/brave.py
	modified:   src/twat_search/web/engines/duckduckgo.py
	modified:   src/twat_search/web/engines/google_scraper.py
	deleted:    src/twat_search/web/engines/searchit.py
	modified:   tests/unit/mock_engine.py
	modified:   tests/unit/web/test_config.py
	modified:   twat_search.txt

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	.specstory/history/2025-02-27_13-08-implementing-falla-and-tracking-progress.md
	src/twat_search/web/engines/falla.py
	src/twat_search/web/engines/lib_falla/

no changes added to commit (use "git add" and/or "git commit -a")

2025-02-27 14:37:40 - On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   .cursor/rules/filetree.mdc
	modified:   CLEANUP.txt
	modified:   PROGRESS.md
	modified:   TODO.md
	modified:   cleanup.py
	modified:   pyproject.toml
	modified:   src/twat_search/web/__init__.py
	modified:   src/twat_search/web/api.py
	modified:   src/twat_search/web/cli.py
	modified:   src/twat_search/web/config.py
	modified:   src/twat_search/web/engine_constants.py
	modified:   src/twat_search/web/engines/__init__.py
	modified:   src/twat_search/web/engines/base.py
	modified:   src/twat_search/web/engines/brave.py
	modified:   src/twat_search/web/engines/duckduckgo.py
	modified:   src/twat_search/web/engines/google_scraper.py
	deleted:    src/twat_search/web/engines/searchit.py
	modified:   tests/unit/mock_engine.py
	modified:   tests/unit/web/test_config.py
	modified:   twat_search.txt

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	.specstory/history/2025-02-27_13-08-implementing-falla-and-tracking-progress.md
	src/twat_search/web/engines/falla.py
	src/twat_search/web/engines/lib_falla/

no changes added to commit (use "git add" and/or "git commit -a")

2025-02-27 14:37:40 - 
=== Environment Status ===
2025-02-27 14:37:40 - Setting up virtual environment
2025-02-27 14:37:41 - Virtual environment created and activated
2025-02-27 14:37:41 - Installing package with all extras
2025-02-27 14:37:41 - Setting up virtual environment
2025-02-27 14:37:41 - Virtual environment created and activated
2025-02-27 14:37:44 - Package installed successfully
2025-02-27 14:37:44 - Running code quality checks
2025-02-27 14:37:44 - >>> Running code fixes...
2025-02-27 14:37:45 - src/twat_search/__init__.py:17:5: PYI056 Calling `.append()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
15 |     from twat_search.__version__ import version as __version__
16 |
17 |     __all__.append("__version__")
   |     ^^^^^^^^^^^^^^ PYI056
18 | except ImportError:
19 |     __version__ = "0.1.0"  # Fallback version
   |

src/twat_search/__init__.py:20:5: PYI056 Calling `.append()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
18 | except ImportError:
19 |     __version__ = "0.1.0"  # Fallback version
20 |     __all__.append("__version__")
   |     ^^^^^^^^^^^^^^ PYI056
21 |
22 | # Import submodules if available
   |

src/twat_search/__init__.py:24:29: F401 `twat_search.web` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
22 | # Import submodules if available
23 | try:
24 |     from twat_search import web
   |                             ^^^ F401
25 |
26 |     __all__.append("web")
   |
   = help: Remove unused import: `twat_search.web`

src/twat_search/__init__.py:26:5: PYI056 Calling `.append()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
24 |     from twat_search import web
25 |
26 |     __all__.append("web")
   |     ^^^^^^^^^^^^^^ PYI056
27 | except ImportError:
28 |     pass
   |

src/twat_search/__main__.py:51:21: ARG004 Unused static method argument: `args`
   |
50 |     @staticmethod
51 |     def _cli_error(*args: Any, **kwargs: Any) -> int:
   |                     ^^^^ ARG004
52 |         """Placeholder function when web CLI is not available.
   |

src/twat_search/__main__.py:51:34: ARG004 Unused static method argument: `kwargs`
   |
50 |     @staticmethod
51 |     def _cli_error(*args: Any, **kwargs: Any) -> int:
   |                                  ^^^^^^ ARG004
52 |         """Placeholder function when web CLI is not available.
   |

src/twat_search/__main__.py:82:24: ARG001 Unused function argument: `out`
   |
80 |     console = Console(theme=Theme({"prompt": "cyan", "question": "bold cyan"}))
81 |
82 |     def display(lines, out):
   |                        ^^^ ARG001
83 |         console.print(Group(*map(ansi_decoder.decode_line, lines)))
   |

src/twat_search/web/__init__.py:21:37: F401 `twat_search.web.api.search` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
19 | # Import core functionality first
20 | try:
21 |     from twat_search.web.api import search
   |                                     ^^^^^^ F401
22 |     from twat_search.web.config import Config, EngineConfig
23 |     from twat_search.web.models import SearchResult
   |
   = help: Remove unused import: `twat_search.web.api.search`

src/twat_search/web/__init__.py:22:40: F401 `twat_search.web.config.Config` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
20 | try:
21 |     from twat_search.web.api import search
22 |     from twat_search.web.config import Config, EngineConfig
   |                                        ^^^^^^ F401
23 |     from twat_search.web.models import SearchResult
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:22:48: F401 `twat_search.web.config.EngineConfig` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
20 | try:
21 |     from twat_search.web.api import search
22 |     from twat_search.web.config import Config, EngineConfig
   |                                                ^^^^^^^^^^^^ F401
23 |     from twat_search.web.models import SearchResult
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:23:40: F401 `twat_search.web.models.SearchResult` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
21 |     from twat_search.web.api import search
22 |     from twat_search.web.config import Config, EngineConfig
23 |     from twat_search.web.models import SearchResult
   |                                        ^^^^^^^^^^^^ F401
24 |
25 |     __all__.extend(["Config", "EngineConfig", "SearchResult", "search"])
   |
   = help: Remove unused import: `twat_search.web.models.SearchResult`

src/twat_search/web/__init__.py:25:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
23 |     from twat_search.web.models import SearchResult
24 |
25 |     __all__.extend(["Config", "EngineConfig", "SearchResult", "search"])
   |     ^^^^^^^^^^^^^^ PYI056
26 | except ImportError:
27 |     pass
   |

src/twat_search/web/__init__.py:31:41: F401 `twat_search.web.engines.brave` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
29 | # Import search engines with try-except blocks to handle optional dependencies
30 | try:
31 |     from twat_search.web.engines import brave, brave_news
   |                                         ^^^^^ F401
32 |
33 |     __all__.extend(["brave", "brave_news"])
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:31:48: F401 `twat_search.web.engines.brave_news` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
29 | # Import search engines with try-except blocks to handle optional dependencies
30 | try:
31 |     from twat_search.web.engines import brave, brave_news
   |                                                ^^^^^^^^^^ F401
32 |
33 |     __all__.extend(["brave", "brave_news"])
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:33:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
31 |     from twat_search.web.engines import brave, brave_news
32 |
33 |     __all__.extend(["brave", "brave_news"])
   |     ^^^^^^^^^^^^^^ PYI056
34 | except ImportError:
35 |     pass
   |

src/twat_search/web/__init__.py:38:41: F401 `twat_search.web.engines.pplx` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
37 | try:
38 |     from twat_search.web.engines import pplx
   |                                         ^^^^ F401
39 |
40 |     __all__.extend(["pplx"])
   |
   = help: Remove unused import: `twat_search.web.engines.pplx`

src/twat_search/web/__init__.py:40:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
38 |     from twat_search.web.engines import pplx
39 |
40 |     __all__.extend(["pplx"])
   |     ^^^^^^^^^^^^^^ PYI056
41 | except ImportError:
42 |     pass
   |

src/twat_search/web/__init__.py:46:41: F401 `twat_search.web.engines.tavily` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
45 | try:
46 |     from twat_search.web.engines import tavily
   |                                         ^^^^^^ F401
47 |
48 |     __all__.extend(["tavily"])
   |
   = help: Remove unused import: `twat_search.web.engines.tavily`

src/twat_search/web/__init__.py:48:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
46 |     from twat_search.web.engines import tavily
47 |
48 |     __all__.extend(["tavily"])
   |     ^^^^^^^^^^^^^^ PYI056
49 | except ImportError:
50 |     pass
   |

src/twat_search/web/__init__.py:53:41: F401 `twat_search.web.engines.you` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
52 | try:
53 |     from twat_search.web.engines import you, you_news
   |                                         ^^^ F401
54 |
55 |     __all__.extend(["you", "you_news"])
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:53:46: F401 `twat_search.web.engines.you_news` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
52 | try:
53 |     from twat_search.web.engines import you, you_news
   |                                              ^^^^^^^^ F401
54 |
55 |     __all__.extend(["you", "you_news"])
   |
   = help: Remove unused import

src/twat_search/web/__init__.py:55:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
53 |     from twat_search.web.engines import you, you_news
54 |
55 |     __all__.extend(["you", "you_news"])
   |     ^^^^^^^^^^^^^^ PYI056
56 | except ImportError:
57 |     pass
   |

src/twat_search/web/__init__.py:60:41: F401 `twat_search.web.engines.critique` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
59 | try:
60 |     from twat_search.web.engines import critique
   |                                         ^^^^^^^^ F401
61 |
62 |     __all__.extend(["critique"])
   |
   = help: Remove unused import: `twat_search.web.engines.critique`

src/twat_search/web/__init__.py:62:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
60 |     from twat_search.web.engines import critique
61 |
62 |     __all__.extend(["critique"])
   |     ^^^^^^^^^^^^^^ PYI056
63 | except ImportError:
64 |     pass
   |

src/twat_search/web/__init__.py:67:41: F401 `twat_search.web.engines.duckduckgo` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
66 | try:
67 |     from twat_search.web.engines import duckduckgo
   |                                         ^^^^^^^^^^ F401
68 |
69 |     __all__.extend(["duckduckgo"])
   |
   = help: Remove unused import: `twat_search.web.engines.duckduckgo`

src/twat_search/web/__init__.py:69:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
67 |     from twat_search.web.engines import duckduckgo
68 |
69 |     __all__.extend(["duckduckgo"])
   |     ^^^^^^^^^^^^^^ PYI056
70 | except ImportError:
71 |     pass
   |

src/twat_search/web/__init__.py:74:41: F401 `twat_search.web.engines.bing_scraper` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
73 | try:
74 |     from twat_search.web.engines import bing_scraper
   |                                         ^^^^^^^^^^^^ F401
75 |
76 |     __all__.extend(["bing_scraper"])
   |
   = help: Remove unused import: `twat_search.web.engines.bing_scraper`

src/twat_search/web/__init__.py:76:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
74 |     from twat_search.web.engines import bing_scraper
75 |
76 |     __all__.extend(["bing_scraper"])
   |     ^^^^^^^^^^^^^^ PYI056
77 | except ImportError:
78 |     pass
   |

src/twat_search/web/__init__.py:81:41: F401 `twat_search.web.engines.serpapi` imported but unused; consider using `importlib.util.find_spec` to test for availability
   |
80 | try:
81 |     from twat_search.web.engines import serpapi
   |                                         ^^^^^^^ F401
82 |
83 |     __all__.extend(["serpapi"])
   |
   = help: Remove unused import: `twat_search.web.engines.serpapi`

src/twat_search/web/__init__.py:83:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
   |
81 |     from twat_search.web.engines import serpapi
82 |
83 |     __all__.extend(["serpapi"])
   |     ^^^^^^^^^^^^^^ PYI056
84 | except ImportError:
85 |     pass
   |

src/twat_search/web/api.py:108:5: FBT001 Boolean-typed positional argument in function definition
    |
106 |     country: str | None = None,
107 |     language: str | None = None,
108 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT001
109 |     time_frame: str | None = None,
110 |     config: Config | None = None,
    |

src/twat_search/web/api.py:108:5: FBT002 Boolean default positional argument in function definition
    |
106 |     country: str | None = None,
107 |     language: str | None = None,
108 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT002
109 |     time_frame: str | None = None,
110 |     config: Config | None = None,
    |

src/twat_search/web/api.py:111:5: FBT001 Boolean-typed positional argument in function definition
    |
109 |     time_frame: str | None = None,
110 |     config: Config | None = None,
111 |     strict_mode: bool = True,
    |     ^^^^^^^^^^^ FBT001
112 |     **kwargs: Any,
113 | ) -> list[SearchResult]:
    |

src/twat_search/web/api.py:111:5: FBT002 Boolean default positional argument in function definition
    |
109 |     time_frame: str | None = None,
110 |     config: Config | None = None,
111 |     strict_mode: bool = True,
    |     ^^^^^^^^^^^ FBT002
112 |     **kwargs: Any,
113 | ) -> list[SearchResult]:
    |

src/twat_search/web/cli.py:83:34: FBT001 Boolean-typed positional argument in function definition
   |
81 |             )
82 |
83 |     def _configure_logging(self, verbose: bool = False) -> None:
   |                                  ^^^^^^^ FBT001
84 |         """Configure the logging level based on the verbose flag."""
85 |         # When not in verbose mode, silence almost all logs
   |

src/twat_search/web/cli.py:83:34: FBT002 Boolean default positional argument in function definition
   |
81 |             )
82 |
83 |     def _configure_logging(self, verbose: bool = False) -> None:
   |                                  ^^^^^^^ FBT002
84 |         """Configure the logging level based on the verbose flag."""
85 |         # When not in verbose mode, silence almost all logs
   |

src/twat_search/web/cli.py:202:9: FBT001 Boolean-typed positional argument in function definition
    |
200 |         query: str,
201 |         params: dict,
202 |         json: bool,
    |         ^^^^ FBT001
203 |         verbose: bool,
204 |         plain: bool = False,
    |

src/twat_search/web/cli.py:203:9: FBT001 Boolean-typed positional argument in function definition
    |
201 |         params: dict,
202 |         json: bool,
203 |         verbose: bool,
    |         ^^^^^^^ FBT001
204 |         plain: bool = False,
205 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:204:9: FBT001 Boolean-typed positional argument in function definition
    |
202 |         json: bool,
203 |         verbose: bool,
204 |         plain: bool = False,
    |         ^^^^^ FBT001
205 |     ) -> list[dict[str, Any]]:
206 |         """
    |

src/twat_search/web/cli.py:204:9: FBT002 Boolean default positional argument in function definition
    |
202 |         json: bool,
203 |         verbose: bool,
204 |         plain: bool = False,
    |         ^^^^^ FBT002
205 |     ) -> list[dict[str, Any]]:
206 |         """
    |

src/twat_search/web/cli.py:269:9: FBT001 Boolean-typed positional argument in function definition
    |
267 |         country: str | None = None,
268 |         language: str | None = None,
269 |         safe_search: bool = True,
    |         ^^^^^^^^^^^ FBT001
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
    |

src/twat_search/web/cli.py:269:9: FBT002 Boolean default positional argument in function definition
    |
267 |         country: str | None = None,
268 |         language: str | None = None,
269 |         safe_search: bool = True,
    |         ^^^^^^^^^^^ FBT002
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
    |

src/twat_search/web/cli.py:271:9: FBT001 Boolean-typed positional argument in function definition
    |
269 |         safe_search: bool = True,
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
272 |         json: bool = False,
273 |         plain: bool = False,
    |

src/twat_search/web/cli.py:271:9: FBT002 Boolean default positional argument in function definition
    |
269 |         safe_search: bool = True,
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
272 |         json: bool = False,
273 |         plain: bool = False,
    |

src/twat_search/web/cli.py:272:9: FBT001 Boolean-typed positional argument in function definition
    |
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
272 |         json: bool = False,
    |         ^^^^ FBT001
273 |         plain: bool = False,
274 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:272:9: FBT002 Boolean default positional argument in function definition
    |
270 |         time_frame: str | None = None,
271 |         verbose: bool = False,
272 |         json: bool = False,
    |         ^^^^ FBT002
273 |         plain: bool = False,
274 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:273:9: FBT001 Boolean-typed positional argument in function definition
    |
271 |         verbose: bool = False,
272 |         json: bool = False,
273 |         plain: bool = False,
    |         ^^^^^ FBT001
274 |         **kwargs: Any,
275 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:273:9: FBT002 Boolean default positional argument in function definition
    |
271 |         verbose: bool = False,
272 |         json: bool = False,
273 |         plain: bool = False,
    |         ^^^^^ FBT002
274 |         **kwargs: Any,
275 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:384:9: FBT001 Boolean-typed positional argument in function definition
    |
382 |         self,
383 |         engine: str | None = None,
384 |         json: bool = False,
    |         ^^^^ FBT001
385 |         plain: bool = False,
386 |     ) -> None:
    |

src/twat_search/web/cli.py:384:9: FBT002 Boolean default positional argument in function definition
    |
382 |         self,
383 |         engine: str | None = None,
384 |         json: bool = False,
    |         ^^^^ FBT002
385 |         plain: bool = False,
386 |     ) -> None:
    |

src/twat_search/web/cli.py:385:9: FBT001 Boolean-typed positional argument in function definition
    |
383 |         engine: str | None = None,
384 |         json: bool = False,
385 |         plain: bool = False,
    |         ^^^^^ FBT001
386 |     ) -> None:
387 |         """
    |

src/twat_search/web/cli.py:385:9: FBT002 Boolean default positional argument in function definition
    |
383 |         engine: str | None = None,
384 |         json: bool = False,
385 |         plain: bool = False,
    |         ^^^^^ FBT002
386 |     ) -> None:
387 |         """
    |

src/twat_search/web/cli.py:584:9: FBT002 Boolean default positional argument in function definition
    |
582 |         country: str | None = None,
583 |         language: str | None = None,
584 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
585 |         time_frame: str | None = None,
586 |         image_url: str | None = None,
    |

src/twat_search/web/cli.py:591:9: FBT001 Boolean-typed positional argument in function definition
    |
589 |         source_blacklist: str | None = None,
590 |         api_key: str | None = None,
591 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
592 |         json: bool = False,
593 |         plain: bool = False,
    |

src/twat_search/web/cli.py:591:9: FBT002 Boolean default positional argument in function definition
    |
589 |         source_blacklist: str | None = None,
590 |         api_key: str | None = None,
591 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
592 |         json: bool = False,
593 |         plain: bool = False,
    |

src/twat_search/web/cli.py:592:9: FBT001 Boolean-typed positional argument in function definition
    |
590 |         api_key: str | None = None,
591 |         verbose: bool = False,
592 |         json: bool = False,
    |         ^^^^ FBT001
593 |         plain: bool = False,
594 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:592:9: FBT002 Boolean default positional argument in function definition
    |
590 |         api_key: str | None = None,
591 |         verbose: bool = False,
592 |         json: bool = False,
    |         ^^^^ FBT002
593 |         plain: bool = False,
594 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:593:9: FBT001 Boolean-typed positional argument in function definition
    |
591 |         verbose: bool = False,
592 |         json: bool = False,
593 |         plain: bool = False,
    |         ^^^^^ FBT001
594 |         **kwargs: Any,
595 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:593:9: FBT002 Boolean default positional argument in function definition
    |
591 |         verbose: bool = False,
592 |         json: bool = False,
593 |         plain: bool = False,
    |         ^^^^^ FBT002
594 |         **kwargs: Any,
595 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:659:9: FBT002 Boolean default positional argument in function definition
    |
657 |         country: str | None = None,
658 |         language: str | None = None,
659 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
660 |         time_frame: str | None = None,
661 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:662:9: FBT001 Boolean-typed positional argument in function definition
    |
660 |         time_frame: str | None = None,
661 |         api_key: str | None = None,
662 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
663 |         json: bool = False,
664 |         plain: bool = False,
    |

src/twat_search/web/cli.py:662:9: FBT002 Boolean default positional argument in function definition
    |
660 |         time_frame: str | None = None,
661 |         api_key: str | None = None,
662 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
663 |         json: bool = False,
664 |         plain: bool = False,
    |

src/twat_search/web/cli.py:663:9: FBT001 Boolean-typed positional argument in function definition
    |
661 |         api_key: str | None = None,
662 |         verbose: bool = False,
663 |         json: bool = False,
    |         ^^^^ FBT001
664 |         plain: bool = False,
665 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:663:9: FBT002 Boolean default positional argument in function definition
    |
661 |         api_key: str | None = None,
662 |         verbose: bool = False,
663 |         json: bool = False,
    |         ^^^^ FBT002
664 |         plain: bool = False,
665 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:664:9: FBT001 Boolean-typed positional argument in function definition
    |
662 |         verbose: bool = False,
663 |         json: bool = False,
664 |         plain: bool = False,
    |         ^^^^^ FBT001
665 |         **kwargs: Any,
666 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:664:9: FBT002 Boolean default positional argument in function definition
    |
662 |         verbose: bool = False,
663 |         json: bool = False,
664 |         plain: bool = False,
    |         ^^^^^ FBT002
665 |         **kwargs: Any,
666 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:707:9: FBT002 Boolean default positional argument in function definition
    |
705 |         country: str | None = None,
706 |         language: str | None = None,
707 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
708 |         time_frame: str | None = None,
709 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:710:9: FBT001 Boolean-typed positional argument in function definition
    |
708 |         time_frame: str | None = None,
709 |         api_key: str | None = None,
710 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
711 |         json: bool = False,
712 |         plain: bool = False,
    |

src/twat_search/web/cli.py:710:9: FBT002 Boolean default positional argument in function definition
    |
708 |         time_frame: str | None = None,
709 |         api_key: str | None = None,
710 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
711 |         json: bool = False,
712 |         plain: bool = False,
    |

src/twat_search/web/cli.py:711:9: FBT001 Boolean-typed positional argument in function definition
    |
709 |         api_key: str | None = None,
710 |         verbose: bool = False,
711 |         json: bool = False,
    |         ^^^^ FBT001
712 |         plain: bool = False,
713 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:711:9: FBT002 Boolean default positional argument in function definition
    |
709 |         api_key: str | None = None,
710 |         verbose: bool = False,
711 |         json: bool = False,
    |         ^^^^ FBT002
712 |         plain: bool = False,
713 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:712:9: FBT001 Boolean-typed positional argument in function definition
    |
710 |         verbose: bool = False,
711 |         json: bool = False,
712 |         plain: bool = False,
    |         ^^^^^ FBT001
713 |         **kwargs: Any,
714 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:712:9: FBT002 Boolean default positional argument in function definition
    |
710 |         verbose: bool = False,
711 |         json: bool = False,
712 |         plain: bool = False,
    |         ^^^^^ FBT002
713 |         **kwargs: Any,
714 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:762:9: FBT002 Boolean default positional argument in function definition
    |
760 |         country: str | None = None,
761 |         language: str | None = None,
762 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
763 |         time_frame: str | None = None,
764 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:765:9: FBT001 Boolean-typed positional argument in function definition
    |
763 |         time_frame: str | None = None,
764 |         api_key: str | None = None,
765 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
766 |         json: bool = False,
767 |         plain: bool = False,
    |

src/twat_search/web/cli.py:765:9: FBT002 Boolean default positional argument in function definition
    |
763 |         time_frame: str | None = None,
764 |         api_key: str | None = None,
765 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
766 |         json: bool = False,
767 |         plain: bool = False,
    |

src/twat_search/web/cli.py:766:9: FBT001 Boolean-typed positional argument in function definition
    |
764 |         api_key: str | None = None,
765 |         verbose: bool = False,
766 |         json: bool = False,
    |         ^^^^ FBT001
767 |         plain: bool = False,
768 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:766:9: FBT002 Boolean default positional argument in function definition
    |
764 |         api_key: str | None = None,
765 |         verbose: bool = False,
766 |         json: bool = False,
    |         ^^^^ FBT002
767 |         plain: bool = False,
768 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:767:9: FBT001 Boolean-typed positional argument in function definition
    |
765 |         verbose: bool = False,
766 |         json: bool = False,
767 |         plain: bool = False,
    |         ^^^^^ FBT001
768 |         **kwargs: Any,
769 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:767:9: FBT002 Boolean default positional argument in function definition
    |
765 |         verbose: bool = False,
766 |         json: bool = False,
767 |         plain: bool = False,
    |         ^^^^^ FBT002
768 |         **kwargs: Any,
769 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:810:9: FBT002 Boolean default positional argument in function definition
    |
808 |         country: str | None = None,
809 |         language: str | None = None,
810 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
811 |         time_frame: str | None = None,
812 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:816:9: FBT001 Boolean-typed positional argument in function definition
    |
814 |         include_domains: str | None = None,
815 |         exclude_domains: str | None = None,
816 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
817 |         json: bool = False,
818 |         plain: bool = False,
    |

src/twat_search/web/cli.py:816:9: FBT002 Boolean default positional argument in function definition
    |
814 |         include_domains: str | None = None,
815 |         exclude_domains: str | None = None,
816 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
817 |         json: bool = False,
818 |         plain: bool = False,
    |

src/twat_search/web/cli.py:817:9: FBT001 Boolean-typed positional argument in function definition
    |
815 |         exclude_domains: str | None = None,
816 |         verbose: bool = False,
817 |         json: bool = False,
    |         ^^^^ FBT001
818 |         plain: bool = False,
819 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:817:9: FBT002 Boolean default positional argument in function definition
    |
815 |         exclude_domains: str | None = None,
816 |         verbose: bool = False,
817 |         json: bool = False,
    |         ^^^^ FBT002
818 |         plain: bool = False,
819 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:818:9: FBT001 Boolean-typed positional argument in function definition
    |
816 |         verbose: bool = False,
817 |         json: bool = False,
818 |         plain: bool = False,
    |         ^^^^^ FBT001
819 |         **kwargs: Any,
820 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:818:9: FBT002 Boolean default positional argument in function definition
    |
816 |         verbose: bool = False,
817 |         json: bool = False,
818 |         plain: bool = False,
    |         ^^^^^ FBT002
819 |         **kwargs: Any,
820 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:868:9: FBT002 Boolean default positional argument in function definition
    |
866 |         country: str | None = None,
867 |         language: str | None = None,
868 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
869 |         time_frame: str | None = None,
870 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:872:9: FBT001 Boolean-typed positional argument in function definition
    |
870 |         api_key: str | None = None,
871 |         model: str | None = None,
872 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
873 |         json: bool = False,
874 |         plain: bool = False,
    |

src/twat_search/web/cli.py:872:9: FBT002 Boolean default positional argument in function definition
    |
870 |         api_key: str | None = None,
871 |         model: str | None = None,
872 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
873 |         json: bool = False,
874 |         plain: bool = False,
    |

src/twat_search/web/cli.py:873:9: FBT001 Boolean-typed positional argument in function definition
    |
871 |         model: str | None = None,
872 |         verbose: bool = False,
873 |         json: bool = False,
    |         ^^^^ FBT001
874 |         plain: bool = False,
875 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:873:9: FBT002 Boolean default positional argument in function definition
    |
871 |         model: str | None = None,
872 |         verbose: bool = False,
873 |         json: bool = False,
    |         ^^^^ FBT002
874 |         plain: bool = False,
875 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:874:9: FBT001 Boolean-typed positional argument in function definition
    |
872 |         verbose: bool = False,
873 |         json: bool = False,
874 |         plain: bool = False,
    |         ^^^^^ FBT001
875 |         **kwargs: Any,
876 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:874:9: FBT002 Boolean default positional argument in function definition
    |
872 |         verbose: bool = False,
873 |         json: bool = False,
874 |         plain: bool = False,
    |         ^^^^^ FBT002
875 |         **kwargs: Any,
876 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:934:9: FBT002 Boolean default positional argument in function definition
    |
932 |         country: str | None = None,
933 |         language: str | None = None,
934 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
935 |         time_frame: str | None = None,
936 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:937:9: FBT001 Boolean-typed positional argument in function definition
    |
935 |         time_frame: str | None = None,
936 |         api_key: str | None = None,
937 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
938 |         json: bool = False,
939 |         plain: bool = False,
    |

src/twat_search/web/cli.py:937:9: FBT002 Boolean default positional argument in function definition
    |
935 |         time_frame: str | None = None,
936 |         api_key: str | None = None,
937 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
938 |         json: bool = False,
939 |         plain: bool = False,
    |

src/twat_search/web/cli.py:938:9: FBT001 Boolean-typed positional argument in function definition
    |
936 |         api_key: str | None = None,
937 |         verbose: bool = False,
938 |         json: bool = False,
    |         ^^^^ FBT001
939 |         plain: bool = False,
940 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:938:9: FBT002 Boolean default positional argument in function definition
    |
936 |         api_key: str | None = None,
937 |         verbose: bool = False,
938 |         json: bool = False,
    |         ^^^^ FBT002
939 |         plain: bool = False,
940 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:939:9: FBT001 Boolean-typed positional argument in function definition
    |
937 |         verbose: bool = False,
938 |         json: bool = False,
939 |         plain: bool = False,
    |         ^^^^^ FBT001
940 |         **kwargs: Any,
941 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:939:9: FBT002 Boolean default positional argument in function definition
    |
937 |         verbose: bool = False,
938 |         json: bool = False,
939 |         plain: bool = False,
    |         ^^^^^ FBT002
940 |         **kwargs: Any,
941 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:981:9: FBT002 Boolean default positional argument in function definition
    |
979 |         country: str | None = None,
980 |         language: str | None = None,
981 |         safe_search: bool | None = True,
    |         ^^^^^^^^^^^ FBT002
982 |         time_frame: str | None = None,
983 |         api_key: str | None = None,
    |

src/twat_search/web/cli.py:984:9: FBT001 Boolean-typed positional argument in function definition
    |
982 |         time_frame: str | None = None,
983 |         api_key: str | None = None,
984 |         verbose: bool = False,
    |         ^^^^^^^ FBT001
985 |         json: bool = False,
986 |         plain: bool = False,
    |

src/twat_search/web/cli.py:984:9: FBT002 Boolean default positional argument in function definition
    |
982 |         time_frame: str | None = None,
983 |         api_key: str | None = None,
984 |         verbose: bool = False,
    |         ^^^^^^^ FBT002
985 |         json: bool = False,
986 |         plain: bool = False,
    |

src/twat_search/web/cli.py:985:9: FBT001 Boolean-typed positional argument in function definition
    |
983 |         api_key: str | None = None,
984 |         verbose: bool = False,
985 |         json: bool = False,
    |         ^^^^ FBT001
986 |         plain: bool = False,
987 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:985:9: FBT002 Boolean default positional argument in function definition
    |
983 |         api_key: str | None = None,
984 |         verbose: bool = False,
985 |         json: bool = False,
    |         ^^^^ FBT002
986 |         plain: bool = False,
987 |         **kwargs: Any,
    |

src/twat_search/web/cli.py:986:9: FBT001 Boolean-typed positional argument in function definition
    |
984 |         verbose: bool = False,
985 |         json: bool = False,
986 |         plain: bool = False,
    |         ^^^^^ FBT001
987 |         **kwargs: Any,
988 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:986:9: FBT002 Boolean default positional argument in function definition
    |
984 |         verbose: bool = False,
985 |         json: bool = False,
986 |         plain: bool = False,
    |         ^^^^^ FBT002
987 |         **kwargs: Any,
988 |     ) -> list[dict[str, Any]]:
    |

src/twat_search/web/cli.py:1034:9: ARG002 Unused method argument: `language`
     |
1032 |         num_results: int = DEFAULT_NUM_RESULTS,
1033 |         country: str | None = None,
1034 |         language: str | None = None,
     |         ^^^^^^^^ ARG002
1035 |         safe_search: bool | None = True,
1036 |         time_frame: str | None = None,
     |

src/twat_search/web/cli.py:1035:9: FBT002 Boolean default positional argument in function definition
     |
1033 |         country: str | None = None,
1034 |         language: str | None = None,
1035 |         safe_search: bool | None = True,
     |         ^^^^^^^^^^^ FBT002
1036 |         time_frame: str | None = None,
1037 |         proxy: str | None = None,
     |

src/twat_search/web/cli.py:1039:9: FBT001 Boolean-typed positional argument in function definition
     |
1037 |         proxy: str | None = None,
1038 |         timeout: int = 10,
1039 |         verbose: bool = False,
     |         ^^^^^^^ FBT001
1040 |         json: bool = False,
1041 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1039:9: FBT002 Boolean default positional argument in function definition
     |
1037 |         proxy: str | None = None,
1038 |         timeout: int = 10,
1039 |         verbose: bool = False,
     |         ^^^^^^^ FBT002
1040 |         json: bool = False,
1041 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1040:9: FBT001 Boolean-typed positional argument in function definition
     |
1038 |         timeout: int = 10,
1039 |         verbose: bool = False,
1040 |         json: bool = False,
     |         ^^^^ FBT001
1041 |         plain: bool = False,
1042 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1040:9: FBT002 Boolean default positional argument in function definition
     |
1038 |         timeout: int = 10,
1039 |         verbose: bool = False,
1040 |         json: bool = False,
     |         ^^^^ FBT002
1041 |         plain: bool = False,
1042 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1041:9: FBT001 Boolean-typed positional argument in function definition
     |
1039 |         verbose: bool = False,
1040 |         json: bool = False,
1041 |         plain: bool = False,
     |         ^^^^^ FBT001
1042 |         **kwargs: Any,
1043 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1041:9: FBT002 Boolean default positional argument in function definition
     |
1039 |         verbose: bool = False,
1040 |         json: bool = False,
1041 |         plain: bool = False,
     |         ^^^^^ FBT002
1042 |         **kwargs: Any,
1043 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1092:9: FBT001 Boolean-typed positional argument in function definition
     |
1090 |         device_type: str = "desktop",
1091 |         api_key: str | None = None,
1092 |         verbose: bool = False,
     |         ^^^^^^^ FBT001
1093 |         json: bool = False,
1094 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1092:9: FBT002 Boolean default positional argument in function definition
     |
1090 |         device_type: str = "desktop",
1091 |         api_key: str | None = None,
1092 |         verbose: bool = False,
     |         ^^^^^^^ FBT002
1093 |         json: bool = False,
1094 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1093:9: FBT001 Boolean-typed positional argument in function definition
     |
1091 |         api_key: str | None = None,
1092 |         verbose: bool = False,
1093 |         json: bool = False,
     |         ^^^^ FBT001
1094 |         plain: bool = False,
1095 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1093:9: FBT002 Boolean default positional argument in function definition
     |
1091 |         api_key: str | None = None,
1092 |         verbose: bool = False,
1093 |         json: bool = False,
     |         ^^^^ FBT002
1094 |         plain: bool = False,
1095 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1094:9: FBT001 Boolean-typed positional argument in function definition
     |
1092 |         verbose: bool = False,
1093 |         json: bool = False,
1094 |         plain: bool = False,
     |         ^^^^^ FBT001
1095 |         **kwargs: Any,
1096 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1094:9: FBT002 Boolean default positional argument in function definition
     |
1092 |         verbose: bool = False,
1093 |         json: bool = False,
1094 |         plain: bool = False,
     |         ^^^^^ FBT002
1095 |         **kwargs: Any,
1096 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1139:9: FBT001 Boolean-typed positional argument in function definition
     |
1137 |         location: str | None = None,
1138 |         api_key: str | None = None,
1139 |         verbose: bool = False,
     |         ^^^^^^^ FBT001
1140 |         json: bool = False,
1141 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1139:9: FBT002 Boolean default positional argument in function definition
     |
1137 |         location: str | None = None,
1138 |         api_key: str | None = None,
1139 |         verbose: bool = False,
     |         ^^^^^^^ FBT002
1140 |         json: bool = False,
1141 |         plain: bool = False,
     |

src/twat_search/web/cli.py:1140:9: FBT001 Boolean-typed positional argument in function definition
     |
1138 |         api_key: str | None = None,
1139 |         verbose: bool = False,
1140 |         json: bool = False,
     |         ^^^^ FBT001
1141 |         plain: bool = False,
1142 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1140:9: FBT002 Boolean default positional argument in function definition
     |
1138 |         api_key: str | None = None,
1139 |         verbose: bool = False,
1140 |         json: bool = False,
     |         ^^^^ FBT002
1141 |         plain: bool = False,
1142 |         **kwargs: Any,
     |

src/twat_search/web/cli.py:1141:9: FBT001 Boolean-typed positional argument in function definition
     |
1139 |         verbose: bool = False,
1140 |         json: bool = False,
1141 |         plain: bool = False,
     |         ^^^^^ FBT001
1142 |         **kwargs: Any,
1143 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1141:9: FBT002 Boolean default positional argument in function definition
     |
1139 |         verbose: bool = False,
1140 |         json: bool = False,
1141 |         plain: bool = False,
     |         ^^^^^ FBT002
1142 |         **kwargs: Any,
1143 |     ) -> list[dict[str, Any]]:
     |

src/twat_search/web/cli.py:1252:86: PLR2004 Magic value used in comparison, consider replacing `100` with a constant variable
     |
1250 |                     "url": url,
1251 |                     "title": result.title,
1252 |                     "snippet": result.snippet[:100] + "..." if len(result.snippet) > 100 else result.snippet,
     |                                                                                      ^^^ PLR2004
1253 |                     "raw_result": getattr(result, "raw", None),
1254 |                     "is_first": idx == 0,  # Flag to help with UI rendering
     |

src/twat_search/web/cli.py:1262:5: FBT001 Boolean-typed positional argument in function definition
     |
1260 | def _display_results(
1261 |     processed_results: list[dict[str, Any]],
1262 |     verbose: bool = False,
     |     ^^^^^^^ FBT001
1263 |     plain: bool = False,
1264 | ) -> None:
     |

src/twat_search/web/cli.py:1262:5: FBT002 Boolean default positional argument in function definition
     |
1260 | def _display_results(
1261 |     processed_results: list[dict[str, Any]],
1262 |     verbose: bool = False,
     |     ^^^^^^^ FBT002
1263 |     plain: bool = False,
1264 | ) -> None:
     |

src/twat_search/web/cli.py:1263:5: FBT001 Boolean-typed positional argument in function definition
     |
1261 |     processed_results: list[dict[str, Any]],
1262 |     verbose: bool = False,
1263 |     plain: bool = False,
     |     ^^^^^ FBT001
1264 | ) -> None:
1265 |     if not processed_results:
     |

src/twat_search/web/cli.py:1263:5: FBT002 Boolean default positional argument in function definition
     |
1261 |     processed_results: list[dict[str, Any]],
1262 |     verbose: bool = False,
1263 |     plain: bool = False,
     |     ^^^^^ FBT002
1264 | ) -> None:
1265 |     if not processed_results:
     |

src/twat_search/web/cli.py:1356:39: ARG005 Unused lambda argument: `out`
     |
1355 | def main() -> None:
1356 |     fire.core.Display = lambda lines, out: console.print(*lines)
     |                                       ^^^ ARG005
1357 |     fire.Fire(SearchCLI)
     |

src/twat_search/web/config.py:18:30: F401 `loguru.logger` imported but unused
   |
17 | from dotenv import load_dotenv
18 | from loguru import logger as loguru_logger
   |                              ^^^^^^^^^^^^^ F401
19 | from pydantic import BaseModel, Field, field_validator
20 | from pydantic_settings import BaseSettings, SettingsConfigDict
   |
   = help: Remove unused import: `loguru.logger`

src/twat_search/web/config.py:20:31: F401 `pydantic_settings.BaseSettings` imported but unused
   |
18 | from loguru import logger as loguru_logger
19 | from pydantic import BaseModel, Field, field_validator
20 | from pydantic_settings import BaseSettings, SettingsConfigDict
   |                               ^^^^^^^^^^^^ F401
21 |
22 | from twat_search.web.engine_constants import (
   |
   = help: Remove unused import

src/twat_search/web/config.py:20:45: F401 `pydantic_settings.SettingsConfigDict` imported but unused
   |
18 | from loguru import logger as loguru_logger
19 | from pydantic import BaseModel, Field, field_validator
20 | from pydantic_settings import BaseSettings, SettingsConfigDict
   |                                             ^^^^^^^^^^^^^^^^^^ F401
21 |
22 | from twat_search.web.engine_constants import (
   |
   = help: Remove unused import

src/twat_search/web/config.py:24:5: F401 `twat_search.web.engine_constants.BING_SEARCHIT` imported but unused
   |
22 | from twat_search.web.engine_constants import (
23 |     BING_SCRAPER,
24 |     BING_SEARCHIT,
   |     ^^^^^^^^^^^^^ F401
25 |     BRAVE,
26 |     BRAVE_NEWS,
   |
   = help: Remove unused import

src/twat_search/web/config.py:33:5: F401 `twat_search.web.engine_constants.GOOGLE_SEARCHIT` imported but unused
   |
31 |     GOOGLE_HASDATA_FULL,
32 |     GOOGLE_SCRAPER,
33 |     GOOGLE_SEARCHIT,
   |     ^^^^^^^^^^^^^^^ F401
34 |     GOOGLE_SERPAPI,
35 |     PPLX,
   |
   = help: Remove unused import

src/twat_search/web/config.py:36:5: F401 `twat_search.web.engine_constants.QWANT_SEARCHIT` imported but unused
   |
34 |     GOOGLE_SERPAPI,
35 |     PPLX,
36 |     QWANT_SEARCHIT,
   |     ^^^^^^^^^^^^^^ F401
37 |     TAVILY,
38 |     YANDEX_SEARCHIT,
   |
   = help: Remove unused import

src/twat_search/web/config.py:362:22: PTH123 `open()` should be replaced by `Path.open()`
    |
360 |         if config_path.exists():
361 |             try:
362 |                 with open(config_path, encoding="utf-8") as f:
    |                      ^^^^ PTH123
363 |                     file_config = json.load(f)
364 |                 self._merge_config(config_data, file_config)
    |

src/twat_search/web/config.py:396:9: FBT001 Boolean-typed positional argument in function definition
    |
394 |         self,
395 |         engine_name: str,
396 |         enabled: bool = True,
    |         ^^^^^^^ FBT001
397 |         api_key: str | None = None,
398 |         default_params: dict[str, Any] | None = None,
    |

src/twat_search/web/config.py:396:9: FBT002 Boolean default positional argument in function definition
    |
394 |         self,
395 |         engine_name: str,
396 |         enabled: bool = True,
    |         ^^^^^^^ FBT002
397 |         api_key: str | None = None,
398 |         default_params: dict[str, Any] | None = None,
    |

src/twat_search/web/engines/__init__.py:103:46: F401 `twat_search.web.engines.base.SearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
101 | # Import base functionality first
102 | try:
103 |     from twat_search.web.engines.base import SearchEngine, get_engine, get_registered_engines, register_engine
    |                                              ^^^^^^^^^^^^ F401
104 |
105 |     __all__.extend(
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:103:60: F401 `twat_search.web.engines.base.get_engine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
101 | # Import base functionality first
102 | try:
103 |     from twat_search.web.engines.base import SearchEngine, get_engine, get_registered_engines, register_engine
    |                                                            ^^^^^^^^^^ F401
104 |
105 |     __all__.extend(
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:103:72: F401 `twat_search.web.engines.base.get_registered_engines` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
101 | # Import base functionality first
102 | try:
103 |     from twat_search.web.engines.base import SearchEngine, get_engine, get_registered_engines, register_engine
    |                                                                        ^^^^^^^^^^^^^^^^^^^^^^ F401
104 |
105 |     __all__.extend(
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:103:96: F401 `twat_search.web.engines.base.register_engine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
101 | # Import base functionality first
102 | try:
103 |     from twat_search.web.engines.base import SearchEngine, get_engine, get_registered_engines, register_engine
    |                                                                                                ^^^^^^^^^^^^^^^ F401
104 |
105 |     __all__.extend(
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:105:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
103 |     from twat_search.web.engines.base import SearchEngine, get_engine, get_registered_engines, register_engine
104 |
105 |     __all__.extend(
    |     ^^^^^^^^^^^^^^ PYI056
106 |         ["SearchEngine", "get_engine", "get_registered_engines", "register_engine"],
107 |     )
    |

src/twat_search/web/engines/__init__.py:113:47: F401 `twat_search.web.engines.brave.BraveNewsSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
111 | # Import each engine module and add its components to __all__ if successful
112 | try:
113 |     from twat_search.web.engines.brave import BraveNewsSearchEngine, BraveSearchEngine, brave, brave_news
    |                                               ^^^^^^^^^^^^^^^^^^^^^ F401
114 |
115 |     available_engine_functions["brave"] = brave
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:113:70: F401 `twat_search.web.engines.brave.BraveSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
111 | # Import each engine module and add its components to __all__ if successful
112 | try:
113 |     from twat_search.web.engines.brave import BraveNewsSearchEngine, BraveSearchEngine, brave, brave_news
    |                                                                      ^^^^^^^^^^^^^^^^^ F401
114 |
115 |     available_engine_functions["brave"] = brave
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:117:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
115 |     available_engine_functions["brave"] = brave
116 |     available_engine_functions["brave_news"] = brave_news
117 |     __all__.extend(
    |     ^^^^^^^^^^^^^^ PYI056
118 |         ["BraveNewsSearchEngine", "BraveSearchEngine", "brave", "brave_news"],
119 |     )
    |

src/twat_search/web/engines/__init__.py:125:48: F401 `twat_search.web.engines.tavily.TavilySearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
124 | try:
125 |     from twat_search.web.engines.tavily import TavilySearchEngine, tavily
    |                                                ^^^^^^^^^^^^^^^^^^ F401
126 |
127 |     available_engine_functions["tavily"] = tavily
    |
    = help: Remove unused import: `twat_search.web.engines.tavily.TavilySearchEngine`

src/twat_search/web/engines/__init__.py:128:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
127 |     available_engine_functions["tavily"] = tavily
128 |     __all__.extend(["TavilySearchEngine", "tavily"])
    |     ^^^^^^^^^^^^^^ PYI056
129 | except ImportError:
130 |     pass
    |

src/twat_search/web/engines/__init__.py:133:46: F401 `twat_search.web.engines.pplx.PerplexitySearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
132 | try:
133 |     from twat_search.web.engines.pplx import PerplexitySearchEngine, pplx
    |                                              ^^^^^^^^^^^^^^^^^^^^^^ F401
134 |
135 |     available_engine_functions["pplx"] = pplx
    |
    = help: Remove unused import: `twat_search.web.engines.pplx.PerplexitySearchEngine`

src/twat_search/web/engines/__init__.py:136:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
135 |     available_engine_functions["pplx"] = pplx
136 |     __all__.extend(["PerplexitySearchEngine", "pplx"])
    |     ^^^^^^^^^^^^^^ PYI056
137 | except ImportError:
138 |     pass
    |

src/twat_search/web/engines/__init__.py:141:45: F401 `twat_search.web.engines.you.YouNewsSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
140 | try:
141 |     from twat_search.web.engines.you import YouNewsSearchEngine, YouSearchEngine, you, you_news
    |                                             ^^^^^^^^^^^^^^^^^^^ F401
142 |
143 |     available_engine_functions["you"] = you
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:141:66: F401 `twat_search.web.engines.you.YouSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
140 | try:
141 |     from twat_search.web.engines.you import YouNewsSearchEngine, YouSearchEngine, you, you_news
    |                                                                  ^^^^^^^^^^^^^^^ F401
142 |
143 |     available_engine_functions["you"] = you
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:145:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
143 |     available_engine_functions["you"] = you
144 |     available_engine_functions["you_news"] = you_news
145 |     __all__.extend(
    |     ^^^^^^^^^^^^^^ PYI056
146 |         ["YouNewsSearchEngine", "YouSearchEngine", "you", "you_news"],
147 |     )
    |

src/twat_search/web/engines/__init__.py:152:50: F401 `twat_search.web.engines.critique.CritiqueSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
151 | try:
152 |     from twat_search.web.engines.critique import CritiqueSearchEngine, critique
    |                                                  ^^^^^^^^^^^^^^^^^^^^ F401
153 |
154 |     available_engine_functions["critique"] = critique
    |
    = help: Remove unused import: `twat_search.web.engines.critique.CritiqueSearchEngine`

src/twat_search/web/engines/__init__.py:155:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
154 |     available_engine_functions["critique"] = critique
155 |     __all__.extend(["CritiqueSearchEngine", "critique"])
    |     ^^^^^^^^^^^^^^ PYI056
156 | except ImportError:
157 |     pass
    |

src/twat_search/web/engines/__init__.py:160:52: F401 `twat_search.web.engines.duckduckgo.DuckDuckGoSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
159 | try:
160 |     from twat_search.web.engines.duckduckgo import DuckDuckGoSearchEngine, duckduckgo
    |                                                    ^^^^^^^^^^^^^^^^^^^^^^ F401
161 |
162 |     available_engine_functions["duckduckgo"] = duckduckgo
    |
    = help: Remove unused import: `twat_search.web.engines.duckduckgo.DuckDuckGoSearchEngine`

src/twat_search/web/engines/__init__.py:163:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
162 |     available_engine_functions["duckduckgo"] = duckduckgo
163 |     __all__.extend(["DuckDuckGoSearchEngine", "duckduckgo"])
    |     ^^^^^^^^^^^^^^ PYI056
164 | except ImportError:
165 |     pass
    |

src/twat_search/web/engines/__init__.py:169:54: F401 `twat_search.web.engines.bing_scraper.BingScraperSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
167 | # Try to import bing_scraper engine
168 | try:
169 |     from twat_search.web.engines.bing_scraper import BingScraperSearchEngine, bing_scraper
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^ F401
170 |
171 |     available_engine_functions["bing_scraper"] = bing_scraper
    |
    = help: Remove unused import: `twat_search.web.engines.bing_scraper.BingScraperSearchEngine`

src/twat_search/web/engines/__init__.py:172:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
171 |     available_engine_functions["bing_scraper"] = bing_scraper
172 |     __all__.extend(["BingScraperSearchEngine", "bing_scraper"])
    |     ^^^^^^^^^^^^^^ PYI056
173 | except ImportError as e:
174 |     logger.warning(f"Failed to import bing_scraper: {e}")
    |

src/twat_search/web/engines/__init__.py:179:9: F401 `twat_search.web.engines.hasdata.HasDataGoogleEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
177 | try:
178 |     from twat_search.web.engines.hasdata import (
179 |         HasDataGoogleEngine,
    |         ^^^^^^^^^^^^^^^^^^^ F401
180 |         HasDataGoogleLightEngine,
181 |         hasdata_google,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:180:9: F401 `twat_search.web.engines.hasdata.HasDataGoogleLightEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
178 |     from twat_search.web.engines.hasdata import (
179 |         HasDataGoogleEngine,
180 |         HasDataGoogleLightEngine,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ F401
181 |         hasdata_google,
182 |         hasdata_google_full,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:187:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
185 |     available_engine_functions["hasdata_google"] = hasdata_google
186 |     available_engine_functions["hasdata_google_full"] = hasdata_google_full
187 |     __all__.extend(
    |     ^^^^^^^^^^^^^^ PYI056
188 |         [
189 |             "HasDataGoogleEngine",
    |

src/twat_search/web/engines/__init__.py:200:56: F401 `twat_search.web.engines.google_scraper.GoogleScraperEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
198 | # Import Google Scraper engine
199 | try:
200 |     from twat_search.web.engines.google_scraper import GoogleScraperEngine, google_scraper
    |                                                        ^^^^^^^^^^^^^^^^^^^ F401
201 |
202 |     available_engine_functions["google_scraper"] = google_scraper
    |
    = help: Remove unused import: `twat_search.web.engines.google_scraper.GoogleScraperEngine`

src/twat_search/web/engines/__init__.py:203:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
202 |     available_engine_functions["google_scraper"] = google_scraper
203 |     __all__.extend(["GoogleScraperEngine", "google_scraper"])
    |     ^^^^^^^^^^^^^^ PYI056
204 | except (ImportError, SyntaxError) as e:
205 |     logger.warning(f"Failed to import google_scraper module: {e}")
    |

src/twat_search/web/engines/__init__.py:209:49: F401 `twat_search.web.engines.serpapi.SerpApiSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
207 | # Try to import SerpAPI engine
208 | try:
209 |     from twat_search.web.engines.serpapi import SerpApiSearchEngine, google_serpapi
    |                                                 ^^^^^^^^^^^^^^^^^^^ F401
210 |
211 |     available_engine_functions["google_serpapi"] = google_serpapi
    |
    = help: Remove unused import: `twat_search.web.engines.serpapi.SerpApiSearchEngine`

src/twat_search/web/engines/__init__.py:212:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
211 |     available_engine_functions["google_serpapi"] = google_serpapi
212 |     __all__.extend(["SerpApiSearchEngine", "google_serpapi"])
    |     ^^^^^^^^^^^^^^ PYI056
213 | except (ImportError, AttributeError):
214 |     pass
    |

src/twat_search/web/engines/__init__.py:220:9: F401 `twat_search.web.engines.falla.AolFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
218 | try:
219 |     from twat_search.web.engines.falla import (
220 |         AolFallaEngine,
    |         ^^^^^^^^^^^^^^ F401
221 |         AskFallaEngine,
222 |         BingFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:221:9: F401 `twat_search.web.engines.falla.AskFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
219 |     from twat_search.web.engines.falla import (
220 |         AolFallaEngine,
221 |         AskFallaEngine,
    |         ^^^^^^^^^^^^^^ F401
222 |         BingFallaEngine,
223 |         DogpileFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:222:9: F401 `twat_search.web.engines.falla.BingFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
220 |         AolFallaEngine,
221 |         AskFallaEngine,
222 |         BingFallaEngine,
    |         ^^^^^^^^^^^^^^^ F401
223 |         DogpileFallaEngine,
224 |         DuckDuckGoFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:223:9: F401 `twat_search.web.engines.falla.DogpileFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
221 |         AskFallaEngine,
222 |         BingFallaEngine,
223 |         DogpileFallaEngine,
    |         ^^^^^^^^^^^^^^^^^^ F401
224 |         DuckDuckGoFallaEngine,
225 |         FallaSearchEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:224:9: F401 `twat_search.web.engines.falla.DuckDuckGoFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
222 |         BingFallaEngine,
223 |         DogpileFallaEngine,
224 |         DuckDuckGoFallaEngine,
    |         ^^^^^^^^^^^^^^^^^^^^^ F401
225 |         FallaSearchEngine,
226 |         GibiruFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:225:9: F401 `twat_search.web.engines.falla.FallaSearchEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
223 |         DogpileFallaEngine,
224 |         DuckDuckGoFallaEngine,
225 |         FallaSearchEngine,
    |         ^^^^^^^^^^^^^^^^^ F401
226 |         GibiruFallaEngine,
227 |         GoogleFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:226:9: F401 `twat_search.web.engines.falla.GibiruFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
224 |         DuckDuckGoFallaEngine,
225 |         FallaSearchEngine,
226 |         GibiruFallaEngine,
    |         ^^^^^^^^^^^^^^^^^ F401
227 |         GoogleFallaEngine,
228 |         MojeekFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:227:9: F401 `twat_search.web.engines.falla.GoogleFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
225 |         FallaSearchEngine,
226 |         GibiruFallaEngine,
227 |         GoogleFallaEngine,
    |         ^^^^^^^^^^^^^^^^^ F401
228 |         MojeekFallaEngine,
229 |         QwantFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:228:9: F401 `twat_search.web.engines.falla.MojeekFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
226 |         GibiruFallaEngine,
227 |         GoogleFallaEngine,
228 |         MojeekFallaEngine,
    |         ^^^^^^^^^^^^^^^^^ F401
229 |         QwantFallaEngine,
230 |         YahooFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:229:9: F401 `twat_search.web.engines.falla.QwantFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
227 |         GoogleFallaEngine,
228 |         MojeekFallaEngine,
229 |         QwantFallaEngine,
    |         ^^^^^^^^^^^^^^^^ F401
230 |         YahooFallaEngine,
231 |         YandexFallaEngine,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:230:9: F401 `twat_search.web.engines.falla.YahooFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
228 |         MojeekFallaEngine,
229 |         QwantFallaEngine,
230 |         YahooFallaEngine,
    |         ^^^^^^^^^^^^^^^^ F401
231 |         YandexFallaEngine,
232 |         is_falla_available,
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:231:9: F401 `twat_search.web.engines.falla.YandexFallaEngine` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
229 |         QwantFallaEngine,
230 |         YahooFallaEngine,
231 |         YandexFallaEngine,
    |         ^^^^^^^^^^^^^^^^^ F401
232 |         is_falla_available,
233 |     )
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:232:9: F401 `twat_search.web.engines.falla.is_falla_available` imported but unused; consider using `importlib.util.find_spec` to test for availability
    |
230 |         YahooFallaEngine,
231 |         YandexFallaEngine,
232 |         is_falla_available,
    |         ^^^^^^^^^^^^^^^^^^ F401
233 |     )
    |
    = help: Remove unused import

src/twat_search/web/engines/__init__.py:237:5: PYI056 Calling `.extend()` on `__all__` may not be supported by all type checkers (use `+=` instead)
    |
235 |     # Register engine functions
236 |     # These will be implemented later as needed
237 |     __all__.extend(
    |     ^^^^^^^^^^^^^^ PYI056
238 |         [
239 |             "AolFallaEngine",
    |

src/twat_search/web/engines/base.py:20:53: F401 `twat_search.web.exceptions.SearchError` imported but unused
   |
18 | import httpx
19 |
20 | from twat_search.web.exceptions import EngineError, SearchError
   |                                                     ^^^^^^^^^^^ F401
21 |
22 | if TYPE_CHECKING:
   |
   = help: Remove unused import: `twat_search.web.exceptions.SearchError`

src/twat_search/web/engines/base.py:32:121: E501 Line too long (124 > 120)
   |
30 | USER_AGENTS = [
31 |     "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36",
32 |     "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.5 Safari/605.1.15",
   |                                                                                                                         ^^^^ E501
33 |     "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/114.0",
34 |     "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36",
   |

src/twat_search/web/engines/base.py:35:121: E501 Line too long (142 > 120)
   |
33 | …0101 Firefox/114.0",
34 | …e Gecko) Chrome/114.0.0.0 Safari/537.36",
35 | …bKit/605.1.15 (KHTML, like Gecko) Version/16.5 Mobile/15E148 Safari/604.1",
   |                                                       ^^^^^^^^^^^^^^^^^^^^^^ E501
36 | …
   |

src/twat_search/web/engines/base.py:97:64: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
   |
95 |                 # Safely log a portion of the API key
96 |                 key_value = self.config.api_key
97 |                 key_prefix = key_value[:4] if len(key_value) > 4 else "****"
   |                                                                ^ PLR2004
98 |                 key_suffix = key_value[-4:] if len(key_value) > 4 else "****"
99 |                 logger.debug(f"Config API key value: {key_prefix}...{key_suffix}")
   |

src/twat_search/web/engines/base.py:98:65: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
   |
96 |                 key_value = self.config.api_key
97 |                 key_prefix = key_value[:4] if len(key_value) > 4 else "****"
98 |                 key_suffix = key_value[-4:] if len(key_value) > 4 else "****"
   |                                                                 ^ PLR2004
99 |                 logger.debug(f"Config API key value: {key_prefix}...{key_suffix}")
   |

src/twat_search/web/engines/base.py:107:68: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
    |
105 |                 if env_value:
106 |                     # Safely log a portion of the environment variable value
107 |                     env_prefix = env_value[:4] if len(env_value) > 4 else "****"
    |                                                                    ^ PLR2004
108 |                     env_suffix = env_value[-4:] if len(env_value) > 4 else "****"
109 |                     logger.debug(f"Env var {env_var} value: {env_prefix}...{env_suffix}")
    |

src/twat_search/web/engines/base.py:108:69: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
    |
106 |                     # Safely log a portion of the environment variable value
107 |                     env_prefix = env_value[:4] if len(env_value) > 4 else "****"
108 |                     env_suffix = env_value[-4:] if len(env_value) > 4 else "****"
    |                                                                     ^ PLR2004
109 |                     logger.debug(f"Env var {env_var} value: {env_prefix}...{env_suffix}")
    |

src/twat_search/web/engines/base.py:250:37: S311 Standard pseudo-random generators are not suitable for cryptographic purposes
    |
249 |         if self.use_random_user_agent and "user-agent" not in {k.lower() for k in headers}:
250 |             headers["User-Agent"] = random.choice(USER_AGENTS)
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^ S311
251 |
252 |         delay = actual_retry_delay  # Initial delay
    |

src/twat_search/web/engines/base.py:277:26: S311 Standard pseudo-random generators are not suitable for cryptographic purposes
    |
276 |                 # Add jitter to retry delay to avoid thundering herd effect
277 |                 jitter = random.uniform(0.5, 1.5)
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^ S311
278 |                 actual_delay = delay * jitter
    |

src/twat_search/web/engines/base.py:396:5: SIM102 Use a single `if` statement instead of nested `if` statements
    |
395 |       # Check if the engine requires an API key
396 | /     if hasattr(engine_class, "env_api_key_names") and engine_class.env_api_key_names:
397 | |         # If no API key is provided in config, check environment variables
398 | |         if not config.api_key:
    | |______________________________^ SIM102
399 |               logger.debug(f"No API key in config for {engine_name}, checking environment variables")
400 |               for env_var in engine_class.env_api_key_names:
    |
    = help: Combine `if` statements using `and`

src/twat_search/web/engines/bing_scraper.py:56:26: ARG002 Unused method argument: `query`
   |
54 |             self.delay_between_requests = delay_between_requests
55 |
56 |         def search(self, query: str, num_results: int = 10) -> list[Any]:
   |                          ^^^^^ ARG002
57 |             """
58 |             Dummy search method for type checking.
   |

src/twat_search/web/engines/bing_scraper.py:56:38: ARG002 Unused method argument: `num_results`
   |
54 |             self.delay_between_requests = delay_between_requests
55 |
56 |         def search(self, query: str, num_results: int = 10) -> list[Any]:
   |                                      ^^^^^^^^^^^ ARG002
57 |             """
58 |             Dummy search method for type checking.
   |

src/twat_search/web/engines/bing_scraper.py:113:9: FBT002 Boolean default positional argument in function definition
    |
111 |         country: str | None = None,
112 |         language: str | None = None,
113 |         safe_search: bool | str | None = True,
    |         ^^^^^^^^^^^ FBT002
114 |         time_frame: str | None = None,
115 |         **kwargs: Any,
    |

src/twat_search/web/engines/brave.py:3:35: F401 `typing.Optional` imported but unused
  |
1 | from __future__ import annotations
2 |
3 | from typing import Any, ClassVar, Optional
  |                                   ^^^^^^^^ F401
4 |
5 | import httpx
  |
  = help: Remove unused import: `typing.Optional`

src/twat_search/web/engines/brave.py:44:9: FBT001 Boolean-typed positional argument in function definition
   |
42 |         country: str | None = None,
43 |         language: str | None = None,
44 |         safe_search: bool = False,
   |         ^^^^^^^^^^^ FBT001
45 |         time_frame: str | None = None,
46 |         **kwargs: Any,
   |

src/twat_search/web/engines/brave.py:44:9: FBT002 Boolean default positional argument in function definition
   |
42 |         country: str | None = None,
43 |         language: str | None = None,
44 |         safe_search: bool = False,
   |         ^^^^^^^^^^^ FBT002
45 |         time_frame: str | None = None,
46 |         **kwargs: Any,
   |

src/twat_search/web/engines/brave.py:46:11: ARG002 Unused method argument: `kwargs`
   |
44 |         safe_search: bool = False,
45 |         time_frame: str | None = None,
46 |         **kwargs: Any,
   |           ^^^^^^ ARG002
47 |     ) -> None:
48 |         """Initialize the Brave Search engine."""
   |

src/twat_search/web/engines/brave.py:354:5: FBT002 Boolean default positional argument in function definition
    |
352 |     country: str | None = None,
353 |     language: str | None = None,
354 |     safe_search: bool | str | None = True,
    |     ^^^^^^^^^^^ FBT002
355 |     time_frame: str | None = None,
356 |     api_key: str | None = None,
    |

src/twat_search/web/engines/brave.py:394:5: FBT002 Boolean default positional argument in function definition
    |
392 |     country: str | None = None,
393 |     language: str | None = None,
394 |     safe_search: bool | str | None = True,
    |     ^^^^^^^^^^^ FBT002
395 |     time_frame: str | None = None,
396 |     api_key: str | None = None,
    |

src/twat_search/web/engines/critique.py:59:9: ARG002 Unused method argument: `num_results`
   |
57 |         self,
58 |         config: EngineConfig,
59 |         num_results: int = DEFAULT_NUM_RESULTS,
   |         ^^^^^^^^^^^ ARG002
60 |         country: str | None = None,
61 |         language: str | None = None,
   |

src/twat_search/web/engines/critique.py:62:9: FBT002 Boolean default positional argument in function definition
   |
60 |         country: str | None = None,
61 |         language: str | None = None,
62 |         safe_search: bool | None = True,
   |         ^^^^^^^^^^^ FBT002
63 |         time_frame: str | None = None,
64 |         image_url: str | None = None,
   |

src/twat_search/web/engines/critique.py:101:121: E501 Line too long (154 > 120)
    |
 99 | …
100 | …
101 | …e env vars: {', '.join(self.env_api_key_names)} or use the --api-key parameter",
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ E501
102 | …
    |

src/twat_search/web/engines/critique.py:120:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
118 |                   return f"data:image/jpeg;base64,{encoded}"
119 |           except httpx.RequestError as e:
120 | /             raise EngineError(
121 | |                 self.engine_code,
122 | |                 f"Failed to fetch image from URL: {e}",
123 | |             )
    | |_____________^ B904
124 |           except Exception as e:
125 |               raise EngineError(self.engine_code, f"Error processing image: {e}")
    |

src/twat_search/web/engines/critique.py:125:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
123 |             )
124 |         except Exception as e:
125 |             raise EngineError(self.engine_code, f"Error processing image: {e}")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
126 |
127 |     async def _build_payload(self, query: str) -> dict[str, Any]:
    |

src/twat_search/web/engines/critique.py:248:5: FBT002 Boolean default positional argument in function definition
    |
246 |     country: str | None = None,
247 |     language: str | None = None,
248 |     safe_search: bool | None = True,
    |     ^^^^^^^^^^^ FBT002
249 |     time_frame: str | None = None,
250 |     image_url: str | None = None,
    |

src/twat_search/web/engines/duckduckgo.py:54:9: FBT002 Boolean default positional argument in function definition
   |
52 |         country: str | None = None,
53 |         language: str | None = None,
54 |         safe_search: bool | str | None = True,
   |         ^^^^^^^^^^^ FBT002
55 |         time_frame: str | None = None,
56 |         **kwargs: Any,
   |

src/twat_search/web/engines/duckduckgo.py:206:5: FBT001 Boolean-typed positional argument in function definition
    |
204 |     country: str | None = None,
205 |     language: str | None = None,
206 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT001
207 |     time_frame: str | None = None,
208 |     proxy: str | None = None,
    |

src/twat_search/web/engines/duckduckgo.py:206:5: FBT002 Boolean default positional argument in function definition
    |
204 |     country: str | None = None,
205 |     language: str | None = None,
206 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT002
207 |     time_frame: str | None = None,
208 |     proxy: str | None = None,
    |

src/twat_search/web/engines/falla.py:14:26: F401 `urllib.parse.urlparse` imported but unused
   |
13 | import logging
14 | from urllib.parse import urlparse
   |                          ^^^^^^^^ F401
15 |
16 | from twat_search.web.engines.base import SearchEngine
   |
   = help: Remove unused import: `urllib.parse.urlparse`

src/twat_search/web/engines/falla.py:64:12: PLW0603 Using the global statement to update `_falla_available` is discouraged
   |
62 |         bool: True if Falla engines are available, False otherwise
63 |     """
64 |     global _falla_available
   |            ^^^^^^^^^^^^^^^^ PLW0603
65 |     if not _falla_initialized:
66 |         # Check if Falla can be initialized without errors
   |

src/twat_search/web/engines/falla.py:64:12: PLW0603 Using the global statement to update `_falla_available` is discouraged
   |
62 |         bool: True if Falla engines are available, False otherwise
63 |     """
64 |     global _falla_available
   |            ^^^^^^^^^^^^^^^^ PLW0603
65 |     if not _falla_initialized:
66 |         # Check if Falla can be initialized without errors
   |

src/twat_search/web/engines/falla.py:97:16: PLW0603 Using the global statement to update `_falla_initialized` is discouraged
   |
96 |         # Set global flag
97 |         global _falla_initialized
   |                ^^^^^^^^^^^^^^^^^^ PLW0603
98 |         _falla_initialized = True
   |

src/twat_search/web/engines/falla.py:119:42: ARG002 Unused method argument: `kwargs`
    |
117 |         return self._falla_engine_class(**params)
118 |
119 |     async def search(self, query: str, **kwargs) -> list[SearchResult]:
    |                                          ^^^^^^ ARG002
120 |         """
121 |         Perform a search using the Falla engine.
    |

src/twat_search/web/engines/falla.py:157:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
155 |             logger.error(f"Search failed: {e!s}")
156 |             msg = f"Search failed: {e!s}"
157 |             raise SearchEngineError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
    |

src/twat_search/web/engines/google_scraper.py:22:59: F401 `pydantic.field_validator` imported but unused
   |
20 | from typing import TYPE_CHECKING, Any, ClassVar, cast
21 |
22 | from pydantic import BaseModel, HttpUrl, ValidationError, field_validator
   |                                                           ^^^^^^^^^^^^^^^ F401
23 |
24 | from twat_search.web.engine_constants import DEFAULT_NUM_RESULTS
   |
   = help: Remove unused import: `pydantic.field_validator`

src/twat_search/web/engines/google_scraper.py:48:24: ARG001 Unused function argument: `args`
   |
46 |             self.description = description
47 |
48 |     def google_search(*args, **kwargs):  # type: ignore
   |                        ^^^^ ARG001
49 |         """Dummy function for type checking when googlesearch-python is not installed."""
50 |         return []
   |

src/twat_search/web/engines/google_scraper.py:48:32: ARG001 Unused function argument: `kwargs`
   |
46 |             self.description = description
47 |
48 |     def google_search(*args, **kwargs):  # type: ignore
   |                                ^^^^^^ ARG001
49 |         """Dummy function for type checking when googlesearch-python is not installed."""
50 |         return []
   |

src/twat_search/web/engines/google_scraper.py:106:9: FBT002 Boolean default positional argument in function definition
    |
104 |         country: str | None = None,
105 |         language: str | None = None,
106 |         safe_search: bool | str | None = True,
    |         ^^^^^^^^^^^ FBT002
107 |         time_frame: str | None = None,
108 |         **kwargs: Any,
    |

src/twat_search/web/engines/google_scraper.py:304:5: FBT001 Boolean-typed positional argument in function definition
    |
302 |     language: str = "en",
303 |     country: str | None = None,
304 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT001
305 |     sleep_interval: float = 0.0,
306 |     ssl_verify: bool | None = None,
    |

src/twat_search/web/engines/google_scraper.py:304:5: FBT002 Boolean default positional argument in function definition
    |
302 |     language: str = "en",
303 |     country: str | None = None,
304 |     safe_search: bool = True,
    |     ^^^^^^^^^^^ FBT002
305 |     sleep_interval: float = 0.0,
306 |     ssl_verify: bool | None = None,
    |

src/twat_search/web/engines/google_scraper.py:308:5: FBT001 Boolean-typed positional argument in function definition
    |
306 |     ssl_verify: bool | None = None,
307 |     proxy: str | None = None,
308 |     unique: bool = True,
    |     ^^^^^^ FBT001
309 |     **kwargs: Any,
310 | ) -> list[SearchResult]:
    |

src/twat_search/web/engines/google_scraper.py:308:5: FBT002 Boolean default positional argument in function definition
    |
306 |     ssl_verify: bool | None = None,
307 |     proxy: str | None = None,
308 |     unique: bool = True,
    |     ^^^^^^ FBT002
309 |     **kwargs: Any,
310 | ) -> list[SearchResult]:
    |

src/twat_search/web/engines/lib_falla/core/bing.py:4:22: F401 `selenium.webdriver` imported but unused
  |
2 | # Sanix-darker
3 |
4 | from selenium import webdriver
  |                      ^^^^^^^^^ F401
5 | from selenium.webdriver.firefox.options import Options
  |
  = help: Remove unused import: `selenium.webdriver`

src/twat_search/web/engines/lib_falla/core/bing.py:5:48: F401 `selenium.webdriver.firefox.options.Options` imported but unused
  |
4 | from selenium import webdriver
5 | from selenium.webdriver.firefox.options import Options
  |                                                ^^^^^^^ F401
6 |
7 | from twat_search.web.engines.lib_falla.core.falla import Falla
  |
  = help: Remove unused import: `selenium.webdriver.firefox.options.Options`

src/twat_search/web/engines/lib_falla/core/falla.py:8:8: F401 `re` imported but unused
   |
 6 | """
 7 |
 8 | import re
   |        ^^ F401
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |
   = help: Remove unused import: `re`

src/twat_search/web/engines/lib_falla/core/falla.py:10:1: UP035 `typing.Dict` is deprecated, use `dict` instead
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | import bs4
   |

src/twat_search/web/engines/lib_falla/core/falla.py:10:1: UP035 `typing.List` is deprecated, use `list` instead
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | import bs4
   |

src/twat_search/web/engines/lib_falla/core/falla.py:10:20: F401 `typing.Any` imported but unused
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |                    ^^^ F401
11 |
12 | import bs4
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/falla.py:10:25: F401 `typing.Dict` imported but unused
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |                         ^^^^ F401
11 |
12 | import bs4
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/falla.py:10:31: F401 `typing.List` imported but unused
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |                               ^^^^ F401
11 |
12 | import bs4
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/falla.py:10:37: F401 `typing.Optional` imported but unused
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |                                     ^^^^^^^^ F401
11 |
12 | import bs4
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/falla.py:10:47: F401 `typing.Union` imported but unused
   |
 8 | import re
 9 | import time
10 | from typing import Any, Dict, List, Optional, Union
   |                                               ^^^^^ F401
11 |
12 | import bs4
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/falla.py:79:51: FBT001 Boolean-typed positional argument in function definition
   |
77 |             return None
78 |
79 |     def parse_entry_point(self, entry_point: str, use_splash: bool = False) -> BeautifulSoup | None:
   |                                                   ^^^^^^^^^^ FBT001
80 |         """
81 |         Parse the entry point URL and return a BeautifulSoup object.
   |

src/twat_search/web/engines/lib_falla/core/falla.py:79:51: FBT002 Boolean default positional argument in function definition
   |
77 |             return None
78 |
79 |     def parse_entry_point(self, entry_point: str, use_splash: bool = False) -> BeautifulSoup | None:
   |                                                   ^^^^^^^^^^ FBT002
80 |         """
81 |         Parse the entry point URL and return a BeautifulSoup object.
   |

src/twat_search/web/engines/lib_falla/core/falla.py:97:66: FBT001 Boolean-typed positional argument in function definition
   |
95 |             return None
96 |
97 |     def get_each_elements(self, elements: bs4.element.ResultSet, is_test: bool = False) -> list[dict[str, str]]:
   |                                                                  ^^^^^^^ FBT001
98 |         """
99 |         Extract search results from a list of elements.
   |

src/twat_search/web/engines/lib_falla/core/falla.py:97:66: FBT002 Boolean default positional argument in function definition
   |
95 |             return None
96 |
97 |     def get_each_elements(self, elements: bs4.element.ResultSet, is_test: bool = False) -> list[dict[str, str]]:
   |                                                                  ^^^^^^^ FBT002
98 |         """
99 |         Extract search results from a list of elements.
   |

src/twat_search/web/engines/lib_falla/core/falla.py:163:121: E501 Line too long (147 > 120)
    |
161 | …
162 | …
163 | …4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
    |                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^ E501
164 | …
165 | …
    |

src/twat_search/web/engines/lib_falla/core/falla.py:169:39: FBT001 Boolean-typed positional argument in function definition
    |
167 |             return ""
168 |
169 |     def fetch(self, entry_point: str, use_splash: bool = False) -> list[dict[str, str]]:
    |                                       ^^^^^^^^^^ FBT001
170 |         """
171 |         Fetch and parse search results from an entry point URL.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:169:39: FBT002 Boolean default positional argument in function definition
    |
167 |             return ""
168 |
169 |     def fetch(self, entry_point: str, use_splash: bool = False) -> list[dict[str, str]]:
    |                                       ^^^^^^^^^^ FBT002
170 |         """
171 |         Fetch and parse search results from an entry point URL.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:202:47: FBT001 Boolean-typed positional argument in function definition
    |
200 |         raise NotImplementedError(msg)
201 |
202 |     def get_title(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                               ^^^^^^^ FBT001
203 |         """
204 |         Extract the title from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:202:47: FBT002 Boolean default positional argument in function definition
    |
200 |         raise NotImplementedError(msg)
201 |
202 |     def get_title(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                               ^^^^^^^ FBT002
203 |         """
204 |         Extract the title from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:216:46: FBT001 Boolean-typed positional argument in function definition
    |
214 |         raise NotImplementedError(msg)
215 |
216 |     def get_link(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                              ^^^^^^^ FBT001
217 |         """
218 |         Extract the link from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:216:46: FBT002 Boolean default positional argument in function definition
    |
214 |         raise NotImplementedError(msg)
215 |
216 |     def get_link(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                              ^^^^^^^ FBT002
217 |         """
218 |         Extract the link from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:230:49: FBT001 Boolean-typed positional argument in function definition
    |
228 |         raise NotImplementedError(msg)
229 |
230 |     def get_snippet(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                                 ^^^^^^^ FBT001
231 |         """
232 |         Extract the snippet from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/falla.py:230:49: FBT002 Boolean default positional argument in function definition
    |
228 |         raise NotImplementedError(msg)
229 |
230 |     def get_snippet(self, elm: bs4.element.Tag, is_test: bool = False) -> str:
    |                                                 ^^^^^^^ FBT002
231 |         """
232 |         Extract the snippet from a search result element.
    |

src/twat_search/web/engines/lib_falla/core/google.py:8:8: F401 `re` imported but unused
   |
 6 | """
 7 |
 8 | import re
   |        ^^ F401
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   |
   = help: Remove unused import: `re`

src/twat_search/web/engines/lib_falla/core/google.py:10:1: UP035 `typing.Dict` is deprecated, use `dict` instead
   |
 8 | import re
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | from bs4 import BeautifulSoup
   |

src/twat_search/web/engines/lib_falla/core/google.py:10:1: UP035 `typing.List` is deprecated, use `list` instead
   |
 8 | import re
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | from bs4 import BeautifulSoup
   |

src/twat_search/web/engines/lib_falla/core/google.py:10:20: F401 `typing.Dict` imported but unused
   |
 8 | import re
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   |                    ^^^^ F401
11 |
12 | from bs4 import BeautifulSoup
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/google.py:10:26: F401 `typing.List` imported but unused
   |
 8 | import re
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   |                          ^^^^ F401
11 |
12 | from bs4 import BeautifulSoup
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/google.py:10:32: F401 `typing.Optional` imported but unused
   |
 8 | import re
 9 | import urllib.parse
10 | from typing import Dict, List, Optional
   |                                ^^^^^^^^ F401
11 |
12 | from bs4 import BeautifulSoup
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/core/google.py:12:17: F401 `bs4.BeautifulSoup` imported but unused
   |
10 | from typing import Dict, List, Optional
11 |
12 | from bs4 import BeautifulSoup
   |                 ^^^^^^^^^^^^^ F401
13 | from bs4.element import Tag
   |
   = help: Remove unused import: `bs4.BeautifulSoup`

src/twat_search/web/engines/lib_falla/core/google.py:47:35: FBT001 Boolean-typed positional argument in function definition
   |
45 |         return f"{base_url}?{query_string}"
46 |
47 |     def get_title(self, elm: Tag, is_test: bool = False) -> str:
   |                                   ^^^^^^^ FBT001
48 |         """
49 |         Extract the title from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:47:35: FBT002 Boolean default positional argument in function definition
   |
45 |         return f"{base_url}?{query_string}"
46 |
47 |     def get_title(self, elm: Tag, is_test: bool = False) -> str:
   |                                   ^^^^^^^ FBT002
48 |         """
49 |         Extract the title from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:47:35: ARG002 Unused method argument: `is_test`
   |
45 |         return f"{base_url}?{query_string}"
46 |
47 |     def get_title(self, elm: Tag, is_test: bool = False) -> str:
   |                                   ^^^^^^^ ARG002
48 |         """
49 |         Extract the title from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:63:34: FBT001 Boolean-typed positional argument in function definition
   |
61 |         return ""
62 |
63 |     def get_link(self, elm: Tag, is_test: bool = False) -> str:
   |                                  ^^^^^^^ FBT001
64 |         """
65 |         Extract the link from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:63:34: FBT002 Boolean default positional argument in function definition
   |
61 |         return ""
62 |
63 |     def get_link(self, elm: Tag, is_test: bool = False) -> str:
   |                                  ^^^^^^^ FBT002
64 |         """
65 |         Extract the link from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:63:34: ARG002 Unused method argument: `is_test`
   |
61 |         return ""
62 |
63 |     def get_link(self, elm: Tag, is_test: bool = False) -> str:
   |                                  ^^^^^^^ ARG002
64 |         """
65 |         Extract the link from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:84:37: FBT001 Boolean-typed positional argument in function definition
   |
82 |         return ""
83 |
84 |     def get_snippet(self, elm: Tag, is_test: bool = False) -> str:
   |                                     ^^^^^^^ FBT001
85 |         """
86 |         Extract the snippet from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:84:37: FBT002 Boolean default positional argument in function definition
   |
82 |         return ""
83 |
84 |     def get_snippet(self, elm: Tag, is_test: bool = False) -> str:
   |                                     ^^^^^^^ FBT002
85 |         """
86 |         Extract the snippet from a search result element.
   |

src/twat_search/web/engines/lib_falla/core/google.py:84:37: ARG002 Unused method argument: `is_test`
   |
82 |         return ""
83 |
84 |     def get_snippet(self, elm: Tag, is_test: bool = False) -> str:
   |                                     ^^^^^^^ ARG002
85 |         """
86 |         Extract the snippet from a search result element.
   |

src/twat_search/web/engines/lib_falla/main.py:11:1: UP035 `typing.Dict` is deprecated, use `dict` instead
   |
10 | import argparse
11 | from typing import Dict, List
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
12 |
13 | from twat_search.web.engines.lib_falla.utils import get_results, list_engines
   |

src/twat_search/web/engines/lib_falla/main.py:11:1: UP035 `typing.List` is deprecated, use `list` instead
   |
10 | import argparse
11 | from typing import Dict, List
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
12 |
13 | from twat_search.web.engines.lib_falla.utils import get_results, list_engines
   |

src/twat_search/web/engines/lib_falla/main.py:11:20: F401 `typing.Dict` imported but unused
   |
10 | import argparse
11 | from typing import Dict, List
   |                    ^^^^ F401
12 |
13 | from twat_search.web.engines.lib_falla.utils import get_results, list_engines
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/main.py:11:26: F401 `typing.List` imported but unused
   |
10 | import argparse
11 | from typing import Dict, List
   |                          ^^^^ F401
12 |
13 | from twat_search.web.engines.lib_falla.utils import get_results, list_engines
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/main.py:45:5: S110 `try`-`except`-`pass` detected, consider logging the exception
   |
43 |               if "snippet" in result:
44 |                   pass
45 | /     except Exception:
46 | |         pass
   | |____________^ S110
   |

src/twat_search/web/engines/lib_falla/utils.py:8:8: F401 `re` imported but unused
   |
 6 | """
 7 |
 8 | import re
   |        ^^ F401
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   |
   = help: Remove unused import: `re`

src/twat_search/web/engines/lib_falla/utils.py:10:1: UP035 `typing.Dict` is deprecated, use `dict` instead
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | # Import all the search engine implementations
   |

src/twat_search/web/engines/lib_falla/utils.py:10:1: UP035 `typing.List` is deprecated, use `list` instead
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP035
11 |
12 | # Import all the search engine implementations
   |

src/twat_search/web/engines/lib_falla/utils.py:10:20: F401 `typing.Dict` imported but unused
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   |                    ^^^^ F401
11 |
12 | # Import all the search engine implementations
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/utils.py:10:26: F401 `typing.List` imported but unused
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   |                          ^^^^ F401
11 |
12 | # Import all the search engine implementations
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/utils.py:10:32: F401 `typing.Optional` imported but unused
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   |                                ^^^^^^^^ F401
11 |
12 | # Import all the search engine implementations
   |
   = help: Remove unused import

src/twat_search/web/engines/lib_falla/utils.py:10:42: F401 `typing.Union` imported but unused
   |
 8 | import re
 9 | from pathlib import Path
10 | from typing import Dict, List, Optional, Union
   |                                          ^^^^^ F401
11 |
12 | # Import all the search engine implementations
   |
   = help: Remove unused import

src/twat_search/web/engines/pplx.py:14:8: F401 `httpx` imported but unused
   |
12 | from typing import Any, ClassVar
13 |
14 | import httpx
   |        ^^^^^ F401
15 | from pydantic import BaseModel, Field, ValidationError
16 | from pydantic.networks import HttpUrl
   |
   = help: Remove unused import: `httpx`

src/twat_search/web/engines/pplx.py:111:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
109 |               data = response.json()
110 |           except EngineError as e:
111 | /             raise EngineError(
112 | |                 self.engine_code,
113 | |                 f"API request failed: {str(e)!s}",
114 | |             )
    | |_____________^ B904
115 |           except Exception as e:
116 |               raise EngineError(
    |

src/twat_search/web/engines/pplx.py:116:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
114 |               )
115 |           except Exception as e:
116 | /             raise EngineError(
117 | |                 self.engine_code,
118 | |                 f"Unexpected error: {str(e)!s}",
119 | |             )
    | |_____________^ B904
120 |
121 |           results = []
    |

src/twat_search/web/engines/pplx.py:155:5: FBT002 Boolean default positional argument in function definition
    |
153 |     country: str | None = None,
154 |     language: str | None = None,
155 |     safe_search: bool | None = True,
    |     ^^^^^^^^^^^ FBT002
156 |     time_frame: str | None = None,
157 |     api_key: str | None = None,
    |

src/twat_search/web/engines/pplx.py:192:52: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
    |
190 |     if api_key is not None:
191 |         # Safely log a portion of the API key
192 |         key_prefix = api_key[:4] if len(api_key) > 4 else "****"
    |                                                    ^ PLR2004
193 |         key_suffix = api_key[-4:] if len(api_key) > 4 else "****"
194 |         logger.debug(f"Final API key value: {key_prefix}...{key_suffix}")
    |

src/twat_search/web/engines/pplx.py:193:53: PLR2004 Magic value used in comparison, consider replacing `4` with a constant variable
    |
191 |         # Safely log a portion of the API key
192 |         key_prefix = api_key[:4] if len(api_key) > 4 else "****"
193 |         key_suffix = api_key[-4:] if len(api_key) > 4 else "****"
    |                                                     ^ PLR2004
194 |         logger.debug(f"Final API key value: {key_prefix}...{key_suffix}")
195 |     else:
    |

src/twat_search/web/engines/pplx.py:197:121: E501 Line too long (130 > 120)
    |
195 |     else:
196 |         logger.error(
197 |             "No API key available for Perplexity AI. Please set PERPLEXITYAI_API_KEY or PERPLEXITY_API_KEY environment variable.",
    |                                                                                                                         ^^^^^^^^^^ E501
198 |         )
199 |         raise EngineError(
    |

src/twat_search/web/engines/serpapi.py:61:9: FBT002 Boolean default positional argument in function definition
   |
59 |         country: str | None = None,
60 |         language: str | None = None,
61 |         safe_search: bool | str | None = True,
   |         ^^^^^^^^^^^ FBT002
62 |         time_frame: str | None = None,
63 |         **kwargs: Any,
   |

src/twat_search/web/engines/serpapi.py:181:5: FBT002 Boolean default positional argument in function definition
    |
179 |     country: str | None = None,
180 |     language: str | None = None,
181 |     safe_search: bool | str | None = True,
    |     ^^^^^^^^^^^ FBT002
182 |     time_frame: str | None = None,
183 |     google_domain: str | None = None,
    |

src/twat_search/web/engines/tavily.py:64:9: FBT002 Boolean default positional argument in function definition
   |
62 |         country: str | None = None,
63 |         language: str | None = None,
64 |         safe_search: bool | None = True,
   |         ^^^^^^^^^^^ FBT002
65 |         time_frame: str | None = None,
66 |         search_depth: str = "basic",
   |

src/twat_search/web/engines/tavily.py:69:9: FBT001 Boolean-typed positional argument in function definition
   |
67 |         include_domains: list[str] | None = None,
68 |         exclude_domains: list[str] | None = None,
69 |         include_answer: bool = False,
   |         ^^^^^^^^^^^^^^ FBT001
70 |         max_tokens: int | None = None,
71 |         search_type: str = "search",
   |

src/twat_search/web/engines/tavily.py:69:9: FBT002 Boolean default positional argument in function definition
   |
67 |         include_domains: list[str] | None = None,
68 |         exclude_domains: list[str] | None = None,
69 |         include_answer: bool = False,
   |         ^^^^^^^^^^^^^^ FBT002
70 |         max_tokens: int | None = None,
71 |         search_type: str = "search",
   |

src/twat_search/web/engines/tavily.py:180:17: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
178 |                 data = response.json()
179 |             except httpx.HTTPStatusError as e:
180 |                 raise EngineError(self.engine_code, f"HTTP error: {e}")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
181 |             except httpx.RequestError as e:
182 |                 raise EngineError(self.engine_code, f"Request error: {e}")
    |

src/twat_search/web/engines/tavily.py:182:17: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
180 |                 raise EngineError(self.engine_code, f"HTTP error: {e}")
181 |             except httpx.RequestError as e:
182 |                 raise EngineError(self.engine_code, f"Request error: {e}")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
183 |             except Exception as e:
184 |                 raise EngineError(self.engine_code, f"Error: {e!s}")
    |

src/twat_search/web/engines/tavily.py:184:17: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
182 |                 raise EngineError(self.engine_code, f"Request error: {e}")
183 |             except Exception as e:
184 |                 raise EngineError(self.engine_code, f"Error: {e!s}")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
185 |
186 |         results = []
    |

src/twat_search/web/engines/tavily.py:211:5: FBT002 Boolean default positional argument in function definition
    |
209 |     country: str | None = None,
210 |     language: str | None = None,
211 |     safe_search: bool | None = True,
    |     ^^^^^^^^^^^ FBT002
212 |     time_frame: str | None = None,
213 |     search_depth: str = "basic",
    |

src/twat_search/web/engines/tavily.py:216:5: FBT001 Boolean-typed positional argument in function definition
    |
214 |     include_domains: list[str] | None = None,
215 |     exclude_domains: list[str] | None = None,
216 |     include_answer: bool = False,
    |     ^^^^^^^^^^^^^^ FBT001
217 |     max_tokens: int | None = None,
218 |     search_type: str = "search",
    |

src/twat_search/web/engines/tavily.py:216:5: FBT002 Boolean default positional argument in function definition
    |
214 |     include_domains: list[str] | None = None,
215 |     exclude_domains: list[str] | None = None,
216 |     include_answer: bool = False,
    |     ^^^^^^^^^^^^^^ FBT002
217 |     max_tokens: int | None = None,
218 |     search_type: str = "search",
    |

src/twat_search/web/engines/you.py:6:8: F401 `httpx` imported but unused
  |
4 | from typing import Any, ClassVar
5 |
6 | import httpx
  |        ^^^^^ F401
7 | from pydantic import BaseModel, Field, HttpUrl, ValidationError
  |
  = help: Remove unused import: `httpx`

src/twat_search/web/engines/you.py:94:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   |
92 |             return response.json()
93 |         except EngineError as e:
94 |             raise EngineError(self.engine_code, f"API request failed: {str(e)!s}")
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
95 |         except Exception as e:
96 |             raise EngineError(self.engine_code, f"Unexpected error: {str(e)!s}")
   |

src/twat_search/web/engines/you.py:96:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   |
94 |             raise EngineError(self.engine_code, f"API request failed: {str(e)!s}")
95 |         except Exception as e:
96 |             raise EngineError(self.engine_code, f"Unexpected error: {str(e)!s}")
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
   |

src/twat_search/web/engines/you.py:196:5: FBT002 Boolean default positional argument in function definition
    |
194 |     country: str | None = None,
195 |     language: str | None = None,
196 |     safe_search: bool | None = True,
    |     ^^^^^^^^^^^ FBT002
197 |     time_frame: str | None = None,
198 |     api_key: str | None = None,
    |

src/twat_search/web/engines/you.py:238:5: FBT002 Boolean default positional argument in function definition
    |
236 |     country: str | None = None,
237 |     language: str | None = None,
238 |     safe_search: bool | None = True,
    |     ^^^^^^^^^^^ FBT002
239 |     time_frame: str | None = None,
240 |     api_key: str | None = None,
    |

src/twat_search/web/utils.py:23:22: FBT001 Boolean-typed positional argument in function definition
   |
23 | def load_environment(force_reload: bool = False) -> None:
   |                      ^^^^^^^^^^^^ FBT001
24 |     """
25 |     Load environment variables from .env file.
   |

src/twat_search/web/utils.py:23:22: FBT002 Boolean default positional argument in function definition
   |
23 | def load_environment(force_reload: bool = False) -> None:
   |                      ^^^^^^^^^^^^ FBT002
24 |     """
25 |     Load environment variables from .env file.
   |

tests/conftest.py:16:1: PT013 Incorrect import of `pytest`; use `import pytest` instead
   |
15 | import pytest
16 | from pytest import MonkeyPatch
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT013
   |

tests/unit/web/engines/test_base.py:89:32: ARG002 Unused method argument: `query`
   |
87 |         engine_code = "new_engine"
88 |
89 |         async def search(self, query: str) -> list[SearchResult]:
   |                                ^^^^^ ARG002
90 |             return []
   |

tests/unit/web/test_api.py:20:1: PT013 Incorrect import of `pytest`; use `import pytest` instead
   |
18 | import pytest
19 | from pydantic import HttpUrl
20 | from pytest import MonkeyPatch
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT013
21 |
22 | from twat_search.web.api import search
   |

tests/unit/web/test_api.py:100:5: ARG001 Unused function argument: `setup_teardown`
    |
 98 | async def test_search_with_mock_engine(
 99 |     mock_config: Config,
100 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
101 | ) -> None:
102 |     """Test search with a mock engine."""
    |

tests/unit/web/test_api.py:114:5: ARG001 Unused function argument: `setup_teardown`
    |
112 | async def test_search_with_additional_params(
113 |     mock_config: Config,
114 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
115 | ) -> None:
116 |     """Test search with additional parameters."""
    |

tests/unit/web/test_api.py:130:5: ARG001 Unused function argument: `setup_teardown`
    |
128 | async def test_search_with_engine_specific_params(
129 |     mock_config: Config,
130 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
131 | ) -> None:
132 |     """Test search with engine-specific parameters."""
    |

tests/unit/web/test_api.py:144:39: ARG001 Unused function argument: `setup_teardown`
    |
143 | @pytest.mark.asyncio
144 | async def test_search_with_no_engines(setup_teardown: None) -> None:
    |                                       ^^^^^^^^^^^^^^ ARG001
145 |     """Test search with no engines specified raises SearchError."""
146 |     with pytest.raises(SearchError, match="No search engines configured"):
    |

tests/unit/web/test_api.py:153:5: ARG001 Unused function argument: `setup_teardown`
    |
151 | async def test_search_with_failing_engine(
152 |     mock_config: Config,
153 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
154 | ) -> None:
155 |     """Test search with a failing engine returns empty results."""
    |

tests/unit/web/test_api.py:169:5: ARG001 Unused function argument: `setup_teardown`
    |
167 | async def test_search_with_nonexistent_engine(
168 |     mock_config: Config,
169 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
170 | ) -> None:
171 |     """Test search with a non-existent engine raises SearchError."""
    |

tests/unit/web/test_api.py:179:5: ARG001 Unused function argument: `monkeypatch`
    |
177 | async def test_search_with_disabled_engine(
178 |     mock_config: Config,
179 |     monkeypatch: MonkeyPatch,
    |     ^^^^^^^^^^^ ARG001
180 |     setup_teardown: None,
181 | ) -> None:
    |

tests/unit/web/test_api.py:180:5: ARG001 Unused function argument: `setup_teardown`
    |
178 |     mock_config: Config,
179 |     monkeypatch: MonkeyPatch,
180 |     setup_teardown: None,
    |     ^^^^^^^^^^^^^^ ARG001
181 | ) -> None:
182 |     """Test search with a disabled engine raises SearchError."""
    |

tests/unit/web/test_config.py:16:5: PT013 Incorrect import of `pytest`; use `import pytest` instead
   |
15 | if TYPE_CHECKING:
16 |     from pytest import MonkeyPatch
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT013
   |

tests/unit/web/test_config.py:41:26: ARG001 Unused function argument: `isolate_env_vars`
   |
41 | def test_config_defaults(isolate_env_vars: None) -> None:
   |                          ^^^^^^^^^^^^^^^^ ARG001
42 |     """Test Config with default values."""
43 |     config = Config()
   |

tests/unit/web/test_config.py:49:31: ARG001 Unused function argument: `monkeypatch`
   |
49 | def test_config_with_env_vars(monkeypatch: MonkeyPatch, env_vars_for_brave: None) -> None:
   |                               ^^^^^^^^^^^ ARG001
50 |     """Test Config loads settings from environment variables."""
51 |     # Create config
   |

tests/unit/web/test_config.py:49:57: ARG001 Unused function argument: `env_vars_for_brave`
   |
49 | def test_config_with_env_vars(monkeypatch: MonkeyPatch, env_vars_for_brave: None) -> None:
   |                                                         ^^^^^^^^^^^^^^^^^^ ARG001
50 |     """Test Config loads settings from environment variables."""
51 |     # Create config
   |

tests/unit/web/test_exceptions.py:46:13: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
   |
44 |         # Only check engine_name if it's EngineError
45 |         if isinstance(e, EngineError):
46 |             assert e.engine_name == "test_engine"
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
   |

tests/web/test_bing_scraper.py:69:25: N803 Argument name `mock_BingScraper` should be lowercase
   |
68 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
69 |     def test_init(self, mock_BingScraper: MagicMock, engine: Any) -> None:
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
70 |         """Test BingScraperSearchEngine initialization."""
71 |         assert engine.engine_code == "bing_scraper"
   |

tests/web/test_bing_scraper.py:82:9: N803 Argument name `mock_BingScraper` should be lowercase
   |
80 |     async def test_search_basic(
81 |         self,
82 |         mock_BingScraper: MagicMock,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
83 |         engine: BingScraperSearchEngine,
84 |         mock_results: list[MockSearchResult],
   |

tests/web/test_bing_scraper.py:109:44: N803 Argument name `mock_BingScraper` should be lowercase
    |
107 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
108 |     @pytest.mark.asyncio
109 |     async def test_custom_parameters(self, mock_BingScraper: MagicMock) -> None:
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
110 |         """Test custom parameters for engine initialization."""
111 |         # Create engine with custom parameters
    |

tests/web/test_bing_scraper.py:138:47: N803 Argument name `mock_BingScraper` should be lowercase
    |
136 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
137 |     @pytest.mark.asyncio
138 |     async def test_invalid_url_handling(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
139 |         """Test handling of invalid URLs."""
140 |         # Setup mock
    |

tests/web/test_bing_scraper.py:202:38: N803 Argument name `mock_BingScraper` should be lowercase
    |
200 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
201 |     @pytest.mark.asyncio
202 |     async def test_empty_query(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
203 |         """Test behavior with empty query string."""
204 |         # Empty query should raise an EngineError
    |

tests/web/test_bing_scraper.py:213:37: N803 Argument name `mock_BingScraper` should be lowercase
    |
211 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
212 |     @pytest.mark.asyncio
213 |     async def test_no_results(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
214 |         """Test handling of no results returned from BingScraper."""
215 |         # Setup mock to return empty list
    |

tests/web/test_bing_scraper.py:227:40: N803 Argument name `mock_BingScraper` should be lowercase
    |
225 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
226 |     @pytest.mark.asyncio
227 |     async def test_network_error(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
228 |         """Test handling of network errors."""
229 |         # Setup mock to raise ConnectionError
    |

tests/web/test_bing_scraper.py:242:40: N803 Argument name `mock_BingScraper` should be lowercase
    |
240 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
241 |     @pytest.mark.asyncio
242 |     async def test_parsing_error(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
243 |         """Test handling of parsing errors."""
244 |         # Setup mock to raise RuntimeError
    |

tests/web/test_bing_scraper.py:257:48: N803 Argument name `mock_BingScraper` should be lowercase
    |
255 |     @patch("twat_search.web.engines.bing_scraper.BingScraper")
256 |     @pytest.mark.asyncio
257 |     async def test_invalid_result_format(self, mock_BingScraper: MagicMock, engine: BingScraperSearchEngine) -> None:
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^ N803
258 |         """Test handling of invalid result format."""
259 |         # Setup mock to return results with missing attributes
    |

Found 332 errors (4 fixed, 328 remaining).

2025-02-27 14:37:45 - 55 files left unchanged

2025-02-27 14:37:45 - >>>Running type checks...
2025-02-27 14:38:03 - src/twat_search/web/engines/lib_falla/core/startpage.py:4: error: Cannot find implementation or library stub for module named "app.core.Falla"  [import-not-found]
tests/unit/web/test_utils.py:53: error: No overload variant of "range" matches argument type "float"  [call-overload]
tests/unit/web/test_utils.py:53: note: Possible overload variants:
tests/unit/web/test_utils.py:53: note:     def __new__(cls, SupportsIndex, /) -> range
tests/unit/web/test_utils.py:53: note:     def __new__(cls, SupportsIndex, SupportsIndex, SupportsIndex = ..., /) -> range
src/twat_search/web/engines/lib_falla/core/yandex.py:4: error: Cannot find implementation or library stub for module named "app.core.Falla"  [import-not-found]
src/twat_search/web/engines/lib_falla/core/yahoo.py:4: error: Cannot find implementation or library stub for module named "app.core.Falla"  [import-not-found]
src/twat_search/web/engines/lib_falla/core/falla.py:13: error: Library stubs not installed for "requests"  [import-untyped]
src/twat_search/web/engines/lib_falla/core/falla.py:13: note: Hint: "python3 -m pip install types-requests"
src/twat_search/web/engines/lib_falla/core/falla.py:13: note: (or run "mypy --install-types" to install all missing stub packages)
src/twat_search/web/engines/lib_falla/core/falla.py:13: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
src/twat_search/web/engines/lib_falla/core/falla.py:54: error: Incompatible return value type (got "PageElement | None", expected "Tag | None")  [return-value]
src/twat_search/web/engines/lib_falla/core/falla.py:54: error: Argument 2 to "find" of "Tag" has incompatible type "dict[str, str]"; expected "dict[str, str | bytes | Pattern[str] | bool | Callable[[str], bool] | Iterable[str | bytes | Pattern[str] | bool | Callable[[str], bool]]]"  [arg-type]
src/twat_search/web/engines/lib_falla/core/falla.py:54: note: "Dict" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance
src/twat_search/web/engines/lib_falla/core/falla.py:54: note: Consider using "Mapping" instead, which is covariant in the value type
src/twat_search/web/engines/lib_falla/core/falla.py:75: error: Incompatible return value type (got "PageElement | None", expected "Tag | None")  [return-value]
src/twat_search/web/engines/lib_falla/core/falla.py:75: error: Argument 2 to "find" of "Tag" has incompatible type "dict[str, str]"; expected "dict[str, str | bytes | Pattern[str] | bool | Callable[[str], bool] | Iterable[str | bytes | Pattern[str] | bool | Callable[[str], bool]]]"  [arg-type]
src/twat_search/web/engines/lib_falla/core/falla.py:75: note: "Dict" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance
src/twat_search/web/engines/lib_falla/core/falla.py:75: note: Consider using "Mapping" instead, which is covariant in the value type
src/twat_search/web/engines/lib_falla/core/falla.py:151: error: "Falla" has no attribute "use_method"  [attr-defined]
src/twat_search/web/engines/lib_falla/core/falla.py:183: error: "Falla" has no attribute "container_element"  [attr-defined]
src/twat_search/web/engines/lib_falla/core/google.py:75: error: "PageElement" has no attribute "has_attr"  [attr-defined]
src/twat_search/web/engines/lib_falla/core/google.py:76: error: Value of type "PageElement" is not indexable  [index]
src/twat_search/web/engines/lib_falla/utils.py:93: error: "object" has no attribute "search"  [attr-defined]
tests/conftest.py:52: error: Only concrete class can be given where "type[SearchEngine]" is expected  [type-abstract]
src/twat_search/web/engines/falla.py:31: error: Module "twat_search.web.exceptions" has no attribute "SearchEngineError"; maybe "EngineError" or "SearchError"?  [attr-defined]
src/twat_search/web/engines/falla.py:69: error: Unexpected keyword argument "num_results" for "Google"  [call-arg]
src/twat_search/web/engines/lib_falla/core/google.py:21: note: "Google" defined here
src/twat_search/web/engines/falla.py:69: error: Unexpected keyword argument "language" for "Google"  [call-arg]
src/twat_search/web/engines/lib_falla/core/google.py:21: note: "Google" defined here
src/twat_search/web/engines/falla.py:141: error: Need type annotation for "results" (hint: "results: list[<type>] = ...")  [var-annotated]
src/twat_search/web/engines/falla.py:143: error: Unexpected keyword argument "position" for "SearchResult"  [call-arg]
src/twat_search/web/engines/falla.py:143: error: Unexpected keyword argument "query" for "SearchResult"  [call-arg]
src/twat_search/web/engines/google_scraper.py:28: error: Cannot find implementation or library stub for module named "googlesearch"  [import-not-found]
src/twat_search/web/engines/duckduckgo.py:17: error: Cannot find implementation or library stub for module named "duckduckgo_search"  [import-not-found]
src/twat_search/web/cli.py:21: error: Skipping analyzing "fire.core": module is installed, but missing library stubs or py.typed marker  [import-untyped]
src/twat_search/web/cli.py:21: error: Skipping analyzing "fire": module is installed, but missing library stubs or py.typed marker  [import-untyped]
Found 25 errors in 12 files (checked 56 source files)

2025-02-27 14:38:03 - >>> Running tests...
2025-02-27 14:38:07 - ============================= test session starts ==============================
platform darwin -- Python 3.12.8, pytest-8.3.4, pluggy-1.5.0 -- /Users/adam/Developer/vcs/github.twardoch/pub/twat-packages/_good/twat/plugins/repos/twat_search/.venv/bin/python
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/adam/Developer/vcs/github.twardoch/pub/twat-packages/_good/twat
configfile: pyproject.toml
plugins: cov-6.0.0, asyncio-0.25.3, anyio-4.8.0, benchmark-5.1.0, xdist-3.6.1
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None
collecting ... collected 49 items

tests/test_twat_search.py::test_version PASSED                           [  2%]
tests/unit/web/engines/test_base.py::test_search_engine_is_abstract PASSED [  4%]
tests/unit/web/engines/test_base.py::test_search_engine_name_class_var PASSED [  6%]
tests/unit/web/engines/test_base.py::test_engine_registration PASSED     [  8%]
tests/unit/web/engines/test_base.py::test_get_engine_with_invalid_name PASSED [ 10%]
tests/unit/web/engines/test_base.py::test_get_engine_with_disabled_engine PASSED [ 12%]
tests/unit/web/engines/test_base.py::test_get_engine_with_config PASSED  [ 14%]
tests/unit/web/engines/test_base.py::test_get_engine_with_kwargs PASSED  [ 16%]
tests/unit/web/test_api.py::test_search_with_mock_engine FAILED          [ 18%]
tests/unit/web/test_api.py::test_search_with_additional_params PASSED    [ 20%]
tests/unit/web/test_api.py::test_search_with_engine_specific_params PASSED [ 22%]
tests/unit/web/test_api.py::test_search_with_no_engines FAILED           [ 24%]
tests/unit/web/test_api.py::test_search_with_failing_engine PASSED       [ 26%]
tests/unit/web/test_api.py::test_search_with_nonexistent_engine PASSED   [ 28%]
tests/unit/web/test_api.py::test_search_with_disabled_engine PASSED      [ 30%]
tests/unit/web/test_config.py::test_engine_config_defaults PASSED        [ 32%]
tests/unit/web/test_config.py::test_engine_config_values PASSED          [ 34%]
tests/unit/web/test_config.py::test_config_defaults FAILED               [ 36%]
tests/unit/web/test_config.py::test_config_with_env_vars FAILED          [ 38%]
tests/unit/web/test_config.py::test_config_with_direct_initialization PASSED [ 40%]
tests/unit/web/test_config.py::test_config_env_vars_override_direct_config PASSED [ 42%]
tests/unit/web/test_exceptions.py::test_search_error PASSED              [ 44%]
tests/unit/web/test_exceptions.py::test_engine_error PASSED              [ 46%]
tests/unit/web/test_exceptions.py::test_engine_error_inheritance PASSED  [ 48%]
tests/unit/web/test_exceptions.py::test_search_error_as_base_class PASSED [ 51%]
tests/unit/web/test_models.py::test_search_result_valid_data PASSED      [ 53%]
tests/unit/web/test_models.py::test_search_result_with_optional_fields PASSED [ 55%]
tests/unit/web/test_models.py::test_search_result_invalid_url PASSED     [ 57%]
tests/unit/web/test_models.py::test_search_result_empty_fields PASSED    [ 59%]
tests/unit/web/test_models.py::test_search_result_serialization PASSED   [ 61%]
tests/unit/web/test_models.py::test_search_result_deserialization PASSED [ 63%]
tests/unit/web/test_utils.py::test_rate_limiter_init PASSED              [ 65%]
tests/unit/web/test_utils.py::test_rate_limiter_wait_when_not_needed PASSED [ 67%]
tests/unit/web/test_utils.py::test_rate_limiter_wait_when_needed PASSED  [ 69%]
tests/unit/web/test_utils.py::test_rate_limiter_cleans_old_timestamps PASSED [ 71%]
tests/unit/web/test_utils.py::test_rate_limiter_with_different_rates[1] PASSED [ 73%]
tests/unit/web/test_utils.py::test_rate_limiter_with_different_rates[5] PASSED [ 75%]
tests/unit/web/test_utils.py::test_rate_limiter_with_different_rates[10] PASSED [ 77%]
tests/unit/web/test_utils.py::test_rate_limiter_with_different_rates[100] PASSED [ 79%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_init PASSED  [ 81%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_search_basic PASSED [ 83%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_custom_parameters PASSED [ 85%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_invalid_url_handling PASSED [ 87%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_bing_scraper_convenience_function FAILED [ 89%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_empty_query PASSED [ 91%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_no_results PASSED [ 93%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_network_error PASSED [ 95%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_parsing_error PASSED [ 97%]
tests/web/test_bing_scraper.py::TestBingScraperEngine::test_invalid_result_format PASSED [100%]

=================================== FAILURES ===================================
_________________________ test_search_with_mock_engine _________________________

mock_config = Config(engines={'mock': EngineConfig(enabled=True, api_key='mock_key', default_params={'result_count': 2}, engine_code=None)})
setup_teardown = None

    @pytest.mark.asyncio
    async def test_search_with_mock_engine(
        mock_config: Config,
        setup_teardown: None,
    ) -> None:
        """Test search with a mock engine."""
        results = await search("test query", engines=["mock"], config=mock_config)
    
>       assert len(results) == 2
E       AssertionError: assert 1 == 2
E        +  where 1 = len([SearchResult(title='Mock Result 1 for test query', url=HttpUrl('https://example.com/1'), snippet='This is mock result 1 for query: test query', source='mock', rank=None, raw=None)])

tests/unit/web/test_api.py:105: AssertionError
_________________________ test_search_with_no_engines __________________________

setup_teardown = None

    @pytest.mark.asyncio
    async def test_search_with_no_engines(setup_teardown: None) -> None:
        """Test search with no engines specified raises SearchError."""
>       with pytest.raises(SearchError, match="No search engines configured"):
E       Failed: DID NOT RAISE <class 'twat_search.web.exceptions.SearchError'>

tests/unit/web/test_api.py:146: Failed
------------------------------ Captured log call -------------------------------
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'duckduckgo': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'duckduckgo': Engine 'duckduckgo': Unknown search engine: 'duckduckgo'. Available engines: bing_scraper, brave, brave_news, critique, disabled_engine, google_hasdata, google_hasdata_full, google_scraper, google_serpapi, mock, new_engine, pplx, tavily, test_engine, you, you_news
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'duckduckgo': Engine 'duckduckgo': Unknown search engine: 'duckduckgo'. Available engines: bing_scraper, brave, brave_news, critique, disabled_engine, google_hasdata, google_hasdata_full, google_scraper, google_serpapi, mock, new_engine, pplx, tavily, test_engine, you, you_news
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for brave. Please set it via one of these env vars: BRAVE_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'brave': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'brave': Engine 'brave': Failed to initialize engine 'brave': Engine 'brave': API key is required for brave. Please set it via one of these env vars: BRAVE_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'brave': Engine 'brave': Failed to initialize engine 'brave': Engine 'brave': API key is required for brave. Please set it via one of these env vars: BRAVE_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for tavily. Please set it via one of these env vars: TAVILY_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'tavily': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'tavily': Engine 'tavily': Failed to initialize engine 'tavily': Engine 'tavily': API key is required for tavily. Please set it via one of these env vars: TAVILY_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'tavily': Engine 'tavily': Failed to initialize engine 'tavily': Engine 'tavily': API key is required for tavily. Please set it via one of these env vars: TAVILY_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for you. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'you': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'you': Engine 'you': Failed to initialize engine 'you': Engine 'you': API key is required for you. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'you': Engine 'you': Failed to initialize engine 'you': Engine 'you': API key is required for you. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for you_news. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'you_news': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'you_news': Engine 'you_news': Failed to initialize engine 'you_news': Engine 'you_news': API key is required for you_news. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'you_news': Engine 'you_news': Failed to initialize engine 'you_news': Engine 'you_news': API key is required for you_news. Please set it via one of these env vars: YOUCOM_API_KEY, YOU_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for pplx. Please set it via one of these env vars: PERPLEXITYAI_API_KEY, PERPLEXITY_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'pplx': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'pplx': Engine 'pplx': Failed to initialize engine 'pplx': Engine 'pplx': API key is required for pplx. Please set it via one of these env vars: PERPLEXITYAI_API_KEY, PERPLEXITY_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'pplx': Engine 'pplx': Failed to initialize engine 'pplx': Engine 'pplx': API key is required for pplx. Please set it via one of these env vars: PERPLEXITYAI_API_KEY, PERPLEXITY_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for critique. Please set it via one of these env vars: CRITIQUE_LABS_API_KEY, CRITIQUE_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'critique': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'critique': Engine 'critique': Failed to initialize engine 'critique': Engine 'critique': API key is required for critique. Please set it via one of these env vars: CRITIQUE_LABS_API_KEY, CRITIQUE_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'critique': Engine 'critique': Failed to initialize engine 'critique': Engine 'critique': API key is required for critique. Please set it via one of these env vars: CRITIQUE_LABS_API_KEY, CRITIQUE_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for brave_news. Please set it via one of these env vars: BRAVE_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'brave_news': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'brave_news': Engine 'brave_news': Failed to initialize engine 'brave_news': Engine 'brave_news': API key is required for brave_news. Please set it via one of these env vars: BRAVE_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'brave_news': Engine 'brave_news': Failed to initialize engine 'brave_news': Engine 'brave_news': API key is required for brave_news. Please set it via one of these env vars: BRAVE_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for google_hasdata. Please set it via one of these env vars: HASDATA_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'google_hasdata': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'google_hasdata': Engine 'google_hasdata': Failed to initialize engine 'google_hasdata': Engine 'google_hasdata': API key is required for google_hasdata. Please set it via one of these env vars: HASDATA_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'google_hasdata': Engine 'google_hasdata': Failed to initialize engine 'google_hasdata': Engine 'google_hasdata': API key is required for google_hasdata. Please set it via one of these env vars: HASDATA_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for google_hasdata_full. Please set it via one of these env vars: HASDATA_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'google_hasdata_full': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'google_hasdata_full': Engine 'google_hasdata_full': Failed to initialize engine 'google_hasdata_full': Engine 'google_hasdata_full': API key is required for google_hasdata_full. Please set it via one of these env vars: HASDATA_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'google_hasdata_full': Engine 'google_hasdata_full': Failed to initialize engine 'google_hasdata_full': Engine 'google_hasdata_full': API key is required for google_hasdata_full. Please set it via one of these env vars: HASDATA_API_KEY
ERROR    twat_search.web.engines.base:base.py:119 API key validation failed: API key is required for google_serpapi. Please set it via one of these env vars: SERPAPI_API_KEY
WARNING  twat_search.web.api:api.py:95 Failed to initialize engine 'google_serpapi': EngineError
ERROR    twat_search.web.api:api.py:98 Error initializing engine 'google_serpapi': Engine 'google_serpapi': Failed to initialize engine 'google_serpapi': Engine 'google_serpapi': API key is required for google_serpapi. Please set it via one of these env vars: SERPAPI_API_KEY
WARNING  twat_search.web.api:api.py:187 Failed to initialize engine 'google_serpapi': Engine 'google_serpapi': Failed to initialize engine 'google_serpapi': Engine 'google_serpapi': API key is required for google_serpapi. Please set it via one of these env vars: SERPAPI_API_KEY
WARNING  twat_search.web.api:api.py:194 Failed to initialize engines: duckduckgo, brave, tavily, you, you_news, pplx, critique, brave_news, google_hasdata, google_hasdata_full, google_serpapi
_____________________________ test_config_defaults _____________________________

isolate_env_vars = None

    def test_config_defaults(isolate_env_vars: None) -> None:
        """Test Config with default values."""
        config = Config()
    
        assert isinstance(config.engines, dict)
>       assert len(config.engines) == 0
E       AssertionError: assert 13 == 0
E        +  where 13 = len({'bing_scraper': EngineConfig(enabled=True, api_key=None, default_params={'num_pages': 1, 'delay': 0.5}, engine_code=None), 'brave': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'safe_search': True}, engine_code=None), 'brave_news': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'freshness': 'last7days'}, engine_code=None), 'critique': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'relevance_adjustment': 0.5}, engine_code=None), ...})
E        +    where {'bing_scraper': EngineConfig(enabled=True, api_key=None, default_params={'num_pages': 1, 'delay': 0.5}, engine_code=None), 'brave': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'safe_search': True}, engine_code=None), 'brave_news': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'freshness': 'last7days'}, engine_code=None), 'critique': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'relevance_adjustment': 0.5}, engine_code=None), ...} = Config(engines={'duckduckgo': EngineConfig(enabled=True, api_key=None, default_params={'region': 'us-en', 'safesearch': 'moderate', 'timelimit': 'y', 'num_results': 20}, engine_code=None), 'brave': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'safe_search': True}, engine_code=None), 'tavily': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'search_depth': 'basic', 'include_domains': [], 'exclude_domains': [], 'include_answer': False, 'include_raw_content': False, 'include_images': False}, engine_code=None), 'you': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'country_code': 'us', 'safe_search': True}, engine_code=None), 'you_news': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'country_code': 'us', 'safe_search': True}, engine_code=None), 'pplx': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'focus': None}, engine_code=None), 'critique': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'relevance_adjustment': 0.5}, engine_code=None), 'brave_news': EngineConfig(enabled=True, api_key=None, default_params={'country': 'US', 'language': 'en-US', 'freshness': 'last7days'}, engine_code=None), 'google_hasdata': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'language': 'en'}, engine_code=None), 'google_hasdata_full': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'language': 'en'}, engine_code=None), 'google_serpapi': EngineConfig(enabled=True, api_key=None, default_params={'country': 'us', 'language': 'en', 'safe_search': True}, engine_code=None), 'google_scraper': EngineConfig(enabled=True, api_key=None, default_params={'num_results': 5, 'language': 'en', 'safe': True}, engine_code=None), 'bing_scraper': EngineConfig(enabled=True, api_key=None, default_params={'num_pages': 1, 'delay': 0.5}, engine_code=None)}).engines

tests/unit/web/test_config.py:46: AssertionError
__________________________ test_config_with_env_vars ___________________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x108cfa540>
env_vars_for_brave = None

    def test_config_with_env_vars(monkeypatch: MonkeyPatch, env_vars_for_brave: None) -> None:
        """Test Config loads settings from environment variables."""
        # Create config
        config = Config()
    
        # Check the brave engine was configured
        assert "brave" in config.engines
        brave_config = config.engines["brave"]
        assert brave_config.api_key == "test_brave_key"
        assert brave_config.enabled is True
>       assert brave_config.default_params == {"count": 10}
E       AssertionError: assert {'country': '...search': True} == {'count': 10}
E         
E         Left contains 3 more items:
E         {'country': 'US', 'language': 'en-US', 'safe_search': True}
E         Right contains 1 more item:
E         {'count': 10}
E         
E         Full diff:...
E         
E         ...Full output truncated (8 lines hidden), use '-vv' to show

tests/unit/web/test_config.py:59: AssertionError
------------------------------ Captured log setup ------------------------------
ERROR    twat_search.web.engines.base:base.py:370 Failed to register engine MockBraveEngine: Engine must define a non-empty 'engine_code' attribute.
_________ TestBingScraperEngine.test_bing_scraper_convenience_function _________

self = <test_bing_scraper.TestBingScraperEngine object at 0x108cf8b30>
mock_search = <AsyncMock name='search' id='4443242272'>

    @patch("twat_search.web.api.search")
    @pytest.mark.asyncio
    async def test_bing_scraper_convenience_function(self, mock_search: AsyncMock) -> None:
        """Test the bing_scraper convenience function."""
        # Setup mock
        mock_results = [
            SearchResult(
                title="Test Result",
                url=HttpUrl("https://example.com"),
                snippet="Test description",
                source="bing_scraper",
            ),
        ]
        mock_search.return_value = mock_results
    
        # Use convenience function
        results = await bing_scraper(
            "test query",
            num_results=10,
            max_retries=5,
            delay_between_requests=2.0,
        )
    
        # Verify results
>       assert results == mock_results
E       AssertionError: assert [] == [SearchResult...ne, raw=None)]
E         
E         Right contains one more item: SearchResult(title='Test Result', url=HttpUrl('https://example.com/'), snippet='Test description', source='bing_scraper', rank=None, raw=None)
E         
E         Full diff:
E         + []
E         - [
E         -     SearchResult(title='Test Result', url=HttpUrl('https://example.com/'), snippet='Test description', source='bing_scraper', rank=None, raw=None),
E         - ]

tests/web/test_bing_scraper.py:189: AssertionError
=========================== short test summary info ============================
FAILED tests/unit/web/test_api.py::test_search_with_mock_engine - AssertionEr...
FAILED tests/unit/web/test_api.py::test_search_with_no_engines - Failed: DID ...
FAILED tests/unit/web/test_config.py::test_config_defaults - AssertionError: ...
FAILED tests/unit/web/test_config.py::test_config_with_env_vars - AssertionEr...
FAILED tests/web/test_bing_scraper.py::TestBingScraperEngine::test_bing_scraper_convenience_function
========================= 5 failed, 44 passed in 2.04s =========================

2025-02-27 14:38:07 - All checks completed
2025-02-27 14:38:07 - 
=== TODO.md ===
2025-02-27 14:38:07 - --- 
this_file: TODO.md
--- 

# twat-search 

Tip: Periodically run `./cleanup.py status` to see results of lints and tests.

Edit the detailed plan in this file @TODO.md. Based on the plan, write an itemized list of tasks in @PROGRESS.md and then, as you work, check off your @PROGRESS.md.  

This is the test command that we are targeting: 

```bash
for engine in $(twat-search web info --plain); do echo; echo; echo; echo ">>> $engine"; twat-search web q -e $engine "Adam Twardoch" -n 1 --json --verbose; done;
```

`twat-search` is an asynchronous Python package designed to query multiple search engines simultaneously, aggregate their results, and present them through a unified API and command-line interface (CLI). It aims for:

* **Multi-Engine Support:**  Integrate with various search providers (Brave, Google, Tavily, etc.).
* **Asynchronous Operation:** Utilize `asyncio` for concurrent requests and improved performance.
* **Configurability:** Allow users to configure engines, API keys, and search parameters via environment variables or configuration files.
* **Extensibility:**  Make it easy to add new search engine integrations.
* **Robustness:**  Handle errors gracefully, including API limits and network issues.
* **Consistency:**  Provide a consistent JSON output format for all engines.

## 1. Implementing Falla-based Search Engines

Based on the NEXTENGINES.md file, we need to implement search engines based on the [Falla project](https://github.com/Sanix-Darker/falla), which is a search engine scraper supporting multiple search engines.

### 1.1. Understanding Falla Architecture

Falla is a Python-based search engine scraper that supports multiple search engines including Google, Bing, DuckDuckGo, and others. Each search engine has its own implementation file in the `app/core/` directory, inheriting from a base `Falla` class.

The key components of Falla are:

1. A base `Falla` class that handles common scraping functionality
2. Individual engine classes (Google, Bing, etc.) that define engine-specific parameters
3. A common interface for searching and result parsing

### 1.2. Implementation Plan for *-falla Engines

#### 1.2.1. Setup and Dependencies

1. Create a new module `src/twat_search/web/engines/falla.py` to implement Falla-based engines
2. Add necessary dependencies to `pyproject.toml`:
   - `selenium` for browser automation
   - `lxml` for HTML parsing
   - `requests` for HTTP requests
   - Optional: Consider if we need Docker/Splash for some engines

3. Define engine constants in `src/twat_search/web/engine_constants.py`:
   
```python
   # Falla-based engines
   GOOGLE_FALLA = "google-falla"
   BING_FALLA = "bing-falla"
   DUCKDUCKGO_FALLA = "duckduckgo-falla"
   AOL_FALLA = "aol-falla"
   ASK_FALLA = "ask-falla"
   DOGPILE_FALLA = "dogpile-falla"
   GIBIRU_FALLA = "gibiru-falla"
   MOJEEK_FALLA = "mojeek-falla"
   QWANT_FALLA = "qwant-falla"
   YAHOO_FALLA = "yahoo-falla"
   YANDEX_FALLA = "yandex-falla"
   
   # Update ENGINE_FRIENDLY_NAMES
   ENGINE_FRIENDLY_NAMES.update({
       GOOGLE_FALLA: "Google (Falla)",
       BING_FALLA: "Bing (Falla)",
       DUCKDUCKGO_FALLA: "DuckDuckGo (Falla)",
       AOL_FALLA: "AOL (Falla)",
       ASK_FALLA: "Ask.com (Falla)",
       DOGPILE_FALLA: "DogPile (Falla)",
       GIBIRU_FALLA: "Gibiru (Falla)",
       MOJEEK_FALLA: "Mojeek (Falla)",
       QWANT_FALLA: "Qwant (Falla)",
       YAHOO_FALLA: "Yahoo (Falla)",
       YANDEX_FALLA: "Yandex (Falla)",
   })
   
   # Update ALL_POSSIBLE_ENGINES
   ALL_POSSIBLE_ENGINES.extend([
       GOOGLE_FALLA,
       BING_FALLA,
       DUCKDUCKGO_FALLA,
       AOL_FALLA,
       ASK_FALLA,
       DOGPILE_FALLA,
       GIBIRU_FALLA,
       MOJEEK_FALLA,
       QWANT_FALLA,
       YAHOO_FALLA,
       YANDEX_FALLA,
   ])
   ```

4. Update `src/twat_search/web/engines/__init__.py` to import and register the new engines:
   
```python
   # Add to imports
   from twat_search.web.engine_constants import (
       # ... existing imports ...
       GOOGLE_FALLA,
       BING_FALLA,
       DUCKDUCKGO_FALLA,
       AOL_FALLA,
       ASK_FALLA,
       DOGPILE_FALLA,
       GIBIRU_FALLA,
       MOJEEK_FALLA,
       QWANT_FALLA,
       YAHOO_FALLA,
       YANDEX_FALLA,
   )
   
   # Add to __all__
   __all__ = [
       # ... existing entries ...
       "GOOGLE_FALLA",
       "BING_FALLA",
       "DUCKDUCKGO_FALLA",
       "AOL_FALLA",
       "ASK_FALLA",
       "DOGPILE_FALLA",
       "GIBIRU_FALLA",
       "MOJEEK_FALLA",
       "QWANT_FALLA",
       "YAHOO_FALLA",
       "YANDEX_FALLA",
   ]
   ```

#### 1.2.2. Base Implementation

1. Create a base `FallaSearchEngine` class in `src/twat_search/web/engines/falla.py`

2. Implement specific engine classes for each Falla engine

#### 1.2.3. Falla Integration Approach

Instead of making Falla a dependency, we'll incorporate the Falla code directly into the project:

1. Create a `lib_falla` directory in `src/twat_search/web/engines/` to contain the Falla code
2. Adapt the Falla code to work within our project structure:
   - Update import paths
   - Fix any compatibility issues
   - Ensure proper attribution and licensing
3. Update the `FallaSearchEngine` class to use the embedded Falla code
4. Create a fallback mechanism for when certain dependencies are not available

Benefits of this approach:
* No dependency on an unmaintained external package
* Better control over the code and its behavior
* Ability to fix bugs and make improvements as needed
* Simplified installation for users

#### 1.2.4. Implementation Details

1. The `FallaSearchEngine` class will:
   - Initialize the appropriate Falla engine based on the engine code
   - Convert Falla results to our standard `SearchResult` format
   - Handle errors gracefully
   - Provide consistent behavior across all engines

2. Each specific engine class (e.g., `GoogleFallaEngine`) will:
   - Define engine-specific parameters
   - Initialize the appropriate Falla engine
   - Register itself with the engine registry

3. The embedded Falla code will be modified to:
   - Work with our project structure
   - Use our logging system
   - Handle errors consistently with the rest of the project
   - Support our configuration system

2025-02-27 14:38:07 -  M .cursor/rules/filetree.mdc
 M CLEANUP.txt
 M PROGRESS.md
 M TODO.md
 M cleanup.py
 M pyproject.toml
 M src/twat_search/web/__init__.py
 M src/twat_search/web/api.py
 M src/twat_search/web/cli.py
 M src/twat_search/web/config.py
 M src/twat_search/web/engine_constants.py
 M src/twat_search/web/engines/__init__.py
 M src/twat_search/web/engines/base.py
 M src/twat_search/web/engines/brave.py
 M src/twat_search/web/engines/duckduckgo.py
 M src/twat_search/web/engines/google_scraper.py
 D src/twat_search/web/engines/searchit.py
 M tests/unit/mock_engine.py
 M tests/unit/web/test_config.py
 M twat_search.txt
?? .specstory/history/2025-02-27_13-08-implementing-falla-and-tracking-progress.md
?? src/twat_search/web/engines/falla.py
?? src/twat_search/web/engines/lib_falla/

2025-02-27 14:38:07 - Changes detected in repository
2025-02-27 14:38:12 - Command failed: pre-commit run --all-files
2025-02-27 14:38:12 - Error: 
2025-02-27 14:38:12 - Failed to commit changes: Command '['pre-commit', 'run', '--all-files']' returned non-zero exit status 1.
2025-02-27 14:38:16 - 
📦 Repomix v0.2.29

No custom config found at repomix.config.json or global config at /Users/adam/.config/repomix/repomix.config.json.
You can add a config file for additional settings. Please check https://github.com/yamadashy/repomix for more information.
⠙ Searching for files...
[2K[1A[2K[G⠹ Searching for files...
[2K[1A[2K[G⠸ Collecting files...
[2K[1A[2K[G⠼ Collecting files...
[2K[1A[2K[G⠴ Collecting files...
[2K[1A[2K[G⠦ Collecting files...
[2K[1A[2K[G⠧ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠇ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠏ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠋ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠙ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠹ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠸ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠼ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠴ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠦ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠧ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠇ Collect file... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠏ Collect file... (6/83) .specstory/history.txt
[2K[1A[2K[G⠋ Collect file... (18/83) src/twat_search/web/engines/lib_falla/core/__init__.py
[2K[1A[2K[G⠙ Running security check...
[2K[1A[2K[G⠹ Running security check... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠸ Running security check... (5/83) .github/workflows/release.yml
[2K[1A[2K[G⠼ Processing files...
[2K[1A[2K[G⠴ Processing file... (16/82) resources/pricing.md
[2K[1A[2K[G⠦ Processing file... (45/82) src/twat_search/web/engines/pplx.py
[2K[1A[2K[G⠧ Writing output file...
[2K[1A[2K[G⠇ Calculating metrics...
[2K[1A[2K[G⠏ Calculating metrics...
[2K[1A[2K[G⠋ Calculating metrics...
[2K[1A[2K[G⠙ Calculating metrics...
[2K[1A[2K[G⠹ Calculating metrics... (8/82) resources/brave/brave_video.md
[2K[1A[2K[G⠸ Calculating metrics... (16/82) resources/pricing.md
[2K[1A[2K[G✔ Packing completed successfully!

📈 Top 5 Files by Character Count and Token Count:
──────────────────────────────────────────────────
1.  resources/brave/brave.md (66,964 chars, 16,684 tokens)
2.  resources/you/you_news.md (58,202 chars, 19,062 tokens)
3.  resources/you/you.md (55,634 chars, 13,005 tokens)
4.  resources/pplx/pplx.md (32,839 chars, 8,446 tokens)
5.  NEXTENGINES.md (30,860 chars, 7,971 tokens)

🔎 Security Check:
──────────────────
1 suspicious file(s) detected and excluded from the output:
1. .specstory/history.txt
   - found OpenAI API token: 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

These files have been excluded from the output for security reasons.
Please review these files for potential sensitive information.

📊 Pack Summary:
────────────────
  Total Files: 82 files
  Total Chars: 483,488 chars
 Total Tokens: 125,139 tokens
       Output: twat_search.txt
     Security: 1 suspicious file(s) detected and excluded

🎉 All Done!
Your repository has been successfully packed.

💡 Repomix is now available in your browser! Try it at https://repomix.com

2025-02-27 14:38:16 - Repository content mixed into twat_search.txt
